(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{313:function(e,t,_){"use strict";_.r(t);var n=_(330),a=_.n(n),i=_(323),r=_.n(i),s=_(324),o=_.n(s),c=_(325),l=_.n(c),u=_(326),h=_.n(u),p=_(328),d=_.n(p),E=_(327),f=_.n(E),D=_(329),m=_.n(D),P=_(16),O=_.n(P),M=(_(367),_(342)),b=_(663),C=_(664),v=_(334),g=_(455),I=function(e){function t(e){var _;return r()(this,t),_=l()(this,h()(t).call(this,e)),m()(d()(_),"onClickItem",function(e){_.setState(function(t){return e})}),m()(d()(_),"handlePost",function(){var e=_.state,t=e.home,n=e.foreignSelectData,i=e.taiwanSelectData,r={foreignSelectData:n,taiwanSelectData:i},s=(new Date).setHours(0,0,0,0),o=t?i:n;0===Object.keys(o).length?alert("請選擇目的地或輸入關鍵字"):Object(v.a)({panel:"activity",methods:"post",data:{destination:r,PostTime:s}});var c=a()({},_.state.Foreign?n:i,{Foreign:_.state.Foreign});Object(g.a)(c)}),_.state={home:!1,taiwanSelectData:{},foreignSelectData:{},searchKeyword:{},Foreign:1},_}return f()(t,e),o()(t,[{key:"render",value:function(){var e=this,t=this.state,_=t.home,n=t.taiwanSelectData,a=t.foreignSelectData;return O.a.createElement("div",{className:"activity container activePc"},O.a.createElement("div",{className:"pcBtn"},O.a.createElement(M.a,{className:"m-smn r mbBtn ".concat(_?"":"active"),whenClick:function(){e.setState({home:!1,Foreign:1})}},"國外"),O.a.createElement(M.a,{className:"m-smn r mbBtn ".concat(_?"active":""),whenClick:function(){e.setState({home:!0,Foreign:0})}},"國內")),O.a.createElement(b.a,{home:this.state.home,placeholder:"輸入城市、景點、體驗行程或活動名稱1",onClickItem:this.onClickItem,foreignSelectData:a,className:"search b-no ".concat(_?"d-no":"")}),O.a.createElement(C.a,{home:this.state.home,placeholder:"輸入城市、景點、體驗行程或活動名稱2",onClickItem:this.onClickItem,taiwanSelectData:n,className:"search b-no ".concat(_?"":"d-no")}),O.a.createElement("div",{className:"w-full txt-right btn-wrap"},O.a.createElement(M.a,{className:"search b-no",lg:!0,radius:!0,whenClick:this.handlePost},"搜尋")))}}]),t}(P.Component);_.d(t,"default",function(){return I})},322:function(e,t,_){"use strict";_.d(t,"b",function(){return i}),_.d(t,"g",function(){return r}),_.d(t,"d",function(){return s}),_.d(t,"c",function(){return o}),_.d(t,"e",function(){return c}),_.d(t,"f",function(){return l}),_.d(t,"a",function(){return u});var n=_(340),a=_.n(n);function i(e,t){fetch(e,{method:"GET"}).then(function(e){return e.text()}).then(function(e){var t=e.replace(/\r?\n|\r/g,"").replace(/(?:var|let|const)\s(\w+)\s=/g,'"$1":').replace(/;/g,",").replace(/,$/g,"").replace(/'/g,'"');return JSON.parse("{"+t+"}")}).then(function(e){t(e)})}function r(e){var t=e,_="",n=Object.keys(t).length,a=0;for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(_+=n<=++a?i+"="+t[i]:i+"="+t[i]+"&");return _}function s(e){var t=e.split("-"),_=a()(t,2),n=_[0],i=_[1];return[n=Number(n),i=Number(i)]}function o(){return new Date((new Date).getFullYear(),(new Date).getMonth(),1,8).toISOString().slice(0,7)}function c(e){try{JSON.parse(e)}catch(e){return!1}return!0}function l(e){var t=/^(\d{4})[\-\/]?(\d{2})[\-\/]?(\d{2})$/;if(!t.test(e))return!1;var _=e.match(t),n=parseInt(_[1],10),a=parseInt(_[2],10),i=parseInt(_[3],10),r=[31,28,31,30,31,30,31,31,30,31,30,31];return(n%400==0||n%100!=0&&n%4==0)&&(r[1]=29),i<=r[a-1]}var u={fetchJsToObj:i,findHighestZIndex:function(e){for(var t=document.getElementsByTagName(e),_=0,n=0;n<t.length;n++){var a=document.defaultView.getComputedStyle(t[n],null).getPropertyValue("z-index");_<a&&"auto"!==a&&(_=a)}return parseInt(_,10)},getDomPosition:function(e,t){return"top"===t?e.getBoundingClientRect()[t]+window.pageYOffset:e.getBoundingClientRect()[t]},toQueryString:r,getYearAndMonth:s,getNowMonth:o,addDate:function(e,t){var _=function(e){return e<10?"0"+e:String(e)},n=new Date(e).getTime(),a=new Date(n+864e5*t),i=_(a.getFullYear()),r=_(a.getMonth()+1),s=_(a.getDate());return[i+r+s,i,r,s]},isJsonString:c,isLeapYear:l}},331:function(e,t,_){"use strict";var n=_(322),a=_(335),i=_(330),r=_.n(i),s=_(338),o=_.n(s),c=_(323),l=_.n(c),u=_(324),h=_.n(u),p=_(325),d=_.n(p),E=_(326),f=_.n(E),D=_(328),m=_.n(D),P=_(327),O=_.n(P),M=_(329),b=_.n(M),C=_(16),v=_.n(C),g=_(122),I=_.n(g),T=function(e){function t(e){var _;return l()(this,t),_=d()(this,f()(t).call(this,e)),b()(m()(_),"handle",function(e){if(_.isClickInSide)_.isClickInSide=!1;else if("touchend"===e.type&&(_.isTouch=!0),"click"!==e.type||!_.isTouch){var t=_.props.onClickOutside;!1===_.isUnMounted&&t(e)}}),b()(m()(_),"handleClick",function(){_.isClickInSide=!0}),_.isTouch=!1,_.isClickInSide=!1,_.isUnMounted=!1,_}return O()(t,e),h()(t,[{key:"componentDidMount",value:function(){document.addEventListener("touchend",this.handle,!1),document.addEventListener("click",this.handle,!1)}},{key:"componentWillUnmount",value:function(){this.isUnMounted=!0,document.removeEventListener("touchend",this.handle,!1),document.removeEventListener("click",this.handle,!1)}},{key:"render",value:function(){var e=this.props,t=e.children,_=(e.onClickOutside,o()(e,["children","onClickOutside"]));return v.a.createElement("div",r()({},_,{onClick:this.handleClick}),t)}}]),t}(C.Component);b()(T,"propTypes",{onClickOutside:I.a.func.isRequired});var w=_(334);_.d(t,"b",function(){return n.a}),_.d(t,"c",function(){return n.b}),_.d(t,"h",function(){return n.g}),_.d(t,"e",function(){return n.d}),_.d(t,"d",function(){return n.c}),_.d(t,"f",function(){return n.e}),_.d(t,"g",function(){return n.f}),_.d(t,"a",function(){return a.a}),_.d(t,"i",function(){return w.a})},334:function(e,t,_){"use strict";var n=_(330),a=_.n(n);t.a=function(e,t){var _=e.panel,n=e.methods,i=e.data,r=_+"_queryKey",s=localStorage.getItem(r),o=JSON.parse(s);if(["travel","internationalFlight","chineseFlight","taiwanFlight","hotel","personalVacation","groupVacation","taiwanVacation","themeTravel","cruise","highSpeedRail","activity"].indexOf(_)<0)throw"'".concat(_,"' is not a panel name.");var c=function(){var e=a()({},o);if(Array.isArray(i)){i.forEach(function(t){return delete e[t]});var _=JSON.stringify(e);localStorage.setItem(r,_),"function"==typeof t&&t(e)}else localStorage.removeItem(r)};switch(n){case"get":!function(){if(s&&function(e){try{JSON.parse(e)}catch(e){return!1}return!0}(s)){var e=JSON.parse(s);"function"==typeof t&&t(e)}else c()}();break;case"post":!function(){var e=a()({},o,i),_=JSON.stringify(e);if(!_)throw"Data: '".concat(i,"' can't stringify.");localStorage.setItem(r,_),"function"==typeof t&&t(e)}();break;case"delete":c();break;default:throw"'".concat(n,"' is undefined. You can use 'get', 'post', 'delete'.")}}},335:function(e,t,_){"use strict";_.d(t,"a",function(){return T});var n=_(330),a=_.n(n),i=_(338),r=_.n(i),s=_(323),o=_.n(s),c=_(324),l=_.n(c),u=_(325),h=_.n(u),p=_(326),d=_.n(p),E=_(328),f=_.n(E),D=_(327),m=_.n(D),P=_(329),O=_.n(P),M=_(16),b=_.n(M),C=_(60),v=_.n(C),g=_(122),I=_.n(g),T=function(e){function t(e){var _;return o()(this,t),_=h()(this,d()(t).call(this,e)),O()(f()(_),"handle",function(e){if(!_.__domNode.contains(e.target)){var t=_.props.onClickOutside;"function"==typeof t&&t(e)}}),_.isTouch=!1,_.isClickInSide=!1,_.isUnMounted=!1,_.__domNode=null,_.__wrappedInstance=null,_}return m()(t,e),l()(t,[{key:"componentDidMount",value:function(){document.addEventListener("click",this.handle,!0)}},{key:"componentWillUnmount",value:function(){this.isUnMounted=!0,document.removeEventListener("click",this.handle,!0)}},{key:"render",value:function(){var e=this,t=this.props,_=t.children,n=(t.onClickOutside,r()(t,["children","onClickOutside"]));return b.a.createElement("div",a()({},n,{ref:function(t){e.__domNode=v.a.findDOMNode(t),e.__wrappedInstance=t}}),_)}}]),t}(M.Component);O()(T,"propTypes",{onClickOutside:I.a.func.isRequired})},337:function(e,t,_){"use strict";_.d(t,"g",function(){return a}),_.d(t,"c",function(){return i}),_.d(t,"b",function(){return r}),_.d(t,"d",function(){return s}),_.d(t,"e",function(){return o}),_.d(t,"i",function(){return c}),_.d(t,"h",function(){return l}),_.d(t,"j",function(){return u}),_.d(t,"k",function(){return h}),_.d(t,"f",function(){return p}),_.d(t,"a",function(){return d}),_(349);var n,a=(n={travel:{place:"./json/TRS1NEWTRAVEL.js"},"flight.international":{place:"./json/flightsInternationalDestinationCsutomMenu.js",placeAutoComplete:"./json/getarraytkt6.js",filter:"./json/country.json"},"flight.chinese":{place:"./json/GetArrayTkt5.js"},"flight.taiwan":{place:"./json/twflightdest.json"},hotel:{destination:"./json/hotelMenu.json",destinationAutoComplete:"https://hotel.liontravel.com/search/keyword"},"vacation.personal":{departure:"./json/vacationDeparture.json",destination:"./json/vacationdata.json",destinationAutoComplete:"https://vacation.liontravel.com/ajax/getdestination",keyword:"https://vacation.liontravel.com/search/keyword"},"vacation.group":{place:"./json/TRS1NEWTRAVELFIT.js"},"vacation.taiwan":{destination:"./json/freeTaiwan.js",keyword:"./json/gethotelnamelist.json"},"vacation.taiwan.search":{departure:"./json/departurelocaltw.json",destinationS:"./json/destinationlocalTW_S.json",destination:"./json/destinationlocalTW.json",traffic:"./json/traffic.json"},themeTravel:{place:"./json/TRS1PSUBJECT.js"},activity:{ticketAbroad:"./json/abroad.json",ticketTaiwan:"./json/home.json",keyword:"https://uactivity.liontravel.com/search/keyword"}}).travel,i=n["flight.international"],r=n["flight.chinese"],s=n["flight.taiwan"],o=n.hotel,c=n["vacation.personal"],l=n["vacation.group"],u=n["vacation.taiwan"],h=n["vacation.taiwan.search"],p=n.themeTravel,d=n.activity},367:function(e,t,_){var n=_(383);"string"==typeof n&&(n=[[e.i,n,""]]);var a=_(333)(n,{hmr:!0,transform:void 0,insertInto:void 0});n.locals&&(e.exports=n.locals),e.hot.accept(383,function(){var t=_(383);if("string"==typeof t&&(t=[[e.i,t,""]]),!function(e,t){var _,n=0;for(_ in e){if(!t||e[_]!==t[_])return!1;n++}for(_ in t)n--;return 0===n}(n.locals,t.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");a(t)}),e.hot.dispose(function(){a()})},383:function(e,t,_){(e.exports=_(332)(!1)).push([e.i,".color_09 {\n  color: #24a07d; }\n\n.color_ocean {\n  color: #0077b3 !important; }\n\n.borderRed {\n  border: 2px solid #ff8b88; }\n\n.activity {\n  display: flex;\n  flex-direction: column;\n  overscroll-behavior-y: none;\n  overflow: hidden; }\n  .activity .bt_rcnb {\n    border: 1px solid #dddddd;\n    background: #fff;\n    color: #444;\n    width: 55px;\n    padding: 0;\n    margin: 0 10px 0 0;\n    line-height: 14px;\n    font-size: 14px; }\n    .activity .bt_rcnb.mbBtn {\n      width: 96px;\n      height: 32px;\n      border-radius: 3px !important; }\n    .activity .bt_rcnb.search {\n      background-color: #e10500;\n      color: white;\n      font-size: 16px;\n      left: 0;\n      bottom: 0;\n      width: 100%; }\n      .activity .bt_rcnb.search:hover {\n        background-color: #bb0400; }\n    .activity .bt_rcnb:hover, .activity .bt_rcnb.active {\n      border: 1px solid #ff615d;\n      background-color: #ff615d;\n      color: #fff; }\n    .activity .bt_rcnb.sureBtn {\n      background-color: #e10500;\n      color: white;\n      border: 0; }\n  .activity .outSideSearchInput {\n    cursor: pointer;\n    border: 1px solid #bbb;\n    height: 50px;\n    border-radius: 2px;\n    line-height: 16px;\n    font-weight: bold;\n    width: 100%;\n    padding: 15px 10px;\n    color: #0077b3; }\n    .activity .outSideSearchInput:focus {\n      outline: none; }\n    .activity .outSideSearchInput.insideSearchInput {\n      border: solid 2px #ff8b88;\n      border-radius: 1px;\n      color: #0077b3; }\n      .activity .outSideSearchInput.insideSearchInput input {\n        color: red !important;\n        text-shadow: 0px 0px 0px #495057; }\n  .activity .search_input_container_wraper {\n    display: flex; }\n    .activity .search_input_container_wraper .search_input_container {\n      display: flex;\n      position: relative;\n      clear: both;\n      flex: 1;\n      height: 40px;\n      font-size: 16px;\n      margin-right: 10px;\n      margin-left: 10px; }\n      .activity .search_input_container_wraper .search_input_container .inputContainer {\n        width: 100%;\n        height: 40px; }\n        .activity .search_input_container_wraper .search_input_container .inputContainer .crossIcon {\n          position: absolute;\n          right: 8px;\n          top: 30%; }\n    .activity .search_input_container_wraper > .bt_rcnb {\n      min-width: auto;\n      min-height: auto;\n      padding: 0;\n      flex: 0 0 50px;\n      height: 40px;\n      line-height: 40px; }\n    .activity .search_input_container_wraper ._crossIcon {\n      position: absolute;\n      top: 6px;\n      right: 4px;\n      padding: 4px;\n      background-color: #fff;\n      cursor: pointer; }\n  .activity .searchContainer .act_rajx {\n    position: absolute;\n    top: 128px;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    border-top: 2px solid #e3e3e3 !important;\n    width: 100%;\n    box-shadow: 0 0px 0px rgba(0, 0, 0, 0.25);\n    border: none;\n    padding: 0; }\n    .activity .searchContainer .act_rajx .noMatchText {\n      font-size: 14px;\n      color: #24a07d;\n      height: 100vh;\n      margin-left: 5px; }\n      .activity .searchContainer .act_rajx .noMatchText .close {\n        display: none; }\n    .activity .searchContainer .act_rajx .section .title {\n      color: #222222;\n      font-weight: bold;\n      font-size: 16px;\n      border-top: none; }\n    .activity .searchContainer .act_rajx .section .item {\n      display: block;\n      padding: 5px 8px;\n      line-height: 2;\n      font-size: 14px;\n      cursor: pointer;\n      border-bottom: 1px solid #ddd; }\n    .activity .searchContainer .act_rajx .m-place {\n      margin-bottom: 10px;\n      color: #24a07d;\n      display: inline-block;\n      font-size: 14px;\n      margin-left: 15px;\n      padding: 0;\n      margin-top: 5px; }\n      .activity .searchContainer .act_rajx .m-place .close {\n        display: none; }\n  .activity .searchContainer .DtmRcfrContainer {\n    width: 100%;\n    height: calc(100vh - 130px);\n    overflow: auto;\n    background-color: #fff; }\n    .activity .searchContainer .DtmRcfrContainer .all_wrap {\n      padding-left: 5px;\n      padding-top: 10px; }\n      .activity .searchContainer .DtmRcfrContainer .all_wrap .cr_rcln .indicator {\n        border: solid 1px #bbb; }\n      .activity .searchContainer .DtmRcfrContainer .all_wrap .cr_rcln span {\n        font-weight: 700;\n        color: #222;\n        font-size: 16px; }\n    .activity .searchContainer .DtmRcfrContainer .ntb_rcln > .ctns > .panel {\n      padding: 0px; }\n    .activity .searchContainer .DtmRcfrContainer > .dtm_rcfr .item {\n      line-height: 25px;\n      width: 33.333333%; }\n    .activity .searchContainer .DtmRcfrContainer .dtm_rcfr .sec {\n      padding-left: 15px;\n      padding-right: 15px; }\n  .activity .searchContainer .Taiwantab .dtm_rcfr .tabs {\n    display: none; }\n  .activity .searchNotFoundTxt {\n    margin: 0 0 10px 10px;\n    color: #24a07d;\n    margin-top: 10px;\n    display: inline-block;\n    font-size: 14px; }\n  .activity .btn-wrap {\n    margin-top: 30px; }\n  .activity .activity_links_wrap {\n    margin-top: 70px; }\n    .activity .activity_links_wrap.oneline {\n      width: 540px; }\n      .activity .activity_links_wrap.oneline > div {\n        display: inline-block; }\n    .activity .activity_links_wrap > div {\n      width: 265px; }\n    .activity .activity_links_wrap a {\n      color: #222222;\n      font-size: 16px;\n      padding-left: 16px;\n      position: relative; }\n      .activity .activity_links_wrap a:before {\n        content: '';\n        width: 4px;\n        height: 4px;\n        background-color: #e3e3e3;\n        border-radius: 50%;\n        position: absolute;\n        left: 6px;\n        top: 50%;\n        margin-top: -2px; }\n  .activity.activityM .outSideSearchInput {\n    flex: auto; }\n  .activity.activityM .int_rcln > .int_rcln_input {\n    display: flex;\n    align-items: center;\n    border: none;\n    color: #0077b3;\n    font-weight: normal; }\n    .activity.activityM .int_rcln > .int_rcln_input:not(input):empty:before {\n      color: #999999; }\n  .activity.activityM .activity_links_wrap {\n    margin-top: 20px; }\n  .activityM.custom {\n    padding-top: 125px;\n    background-color: #fff; }\n    .activityM.custom .search_input-wrap {\n      position: fixed;\n      top: 0;\n      left: 0;\n      right: 0;\n      margin: auto;\n      height: 125px; }\n    .activityM.custom .dtm_rcfr-row {\n      display: flex;\n      padding: 0 15px; }\n      .activityM.custom .dtm_rcfr-row .int_rcln_input {\n        font-weight: normal;\n        color: #0077b3;\n        border: 2px solid #ff8b88; }\n      .activityM.custom .dtm_rcfr-row .clearBtnWrap {\n        height: 96%; }\n      .activityM.custom .dtm_rcfr-row .bt_rcnb {\n        min-width: 50px;\n        margin-left: 10px;\n        border-radius: 5px; }\n    .activityM.custom .searchNotFoundTxt {\n      display: block;\n      margin: 8px 0 10px 16px;\n      font-size: 14px;\n      color: #24a07d; }\n    .activityM.custom .search_result {\n      touch-action: manipulation;\n      height: 100%;\n      overflow-y: auto; }\n      .activityM.custom .search_result .act_rajx {\n        position: static;\n        padding: 0 15px;\n        border: none;\n        border-top: 2px solid #e3e3e3;\n        box-shadow: none; }\n        .activityM.custom .search_result .act_rajx .title {\n          padding: 10px 8px;\n          font-size: 16px;\n          font-weight: bold;\n          color: #222222;\n          border-top: none; }\n        .activityM.custom .search_result .act_rajx .item {\n          padding: 13px 15px;\n          font-size: 14px;\n          color: #222222;\n          border-bottom: 1px solid #e3e3e3; }\n        .activityM.custom .search_result .act_rajx .m-place, .activityM.custom .search_result .act_rajx .noMatchText {\n          padding: 13px 0;\n          font-size: 14px;\n          color: #24a07d; }\n          .activityM.custom .search_result .act_rajx .m-place .close, .activityM.custom .search_result .act_rajx .noMatchText .close {\n            display: none; }\n    .activityM.custom .cr_rcln .indicator {\n      border: solid 1px #bbb; }\n  .activity.activePc {\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n    height: 100%; }\n    .activity.activePc .bt_rcnb.search {\n      width: auto;\n      background-color: #e10500;\n      margin: 0; }\n    .activity.activePc .outSideSearchInput {\n      font-weight: normal !important;\n      color: #0077b3; }\n    .activity.activePc .search_input_container_wraper {\n      position: relative; }\n      .activity.activePc .search_input_container_wraper .search_input_container .inputContainer .crossIcon {\n        position: absolute;\n        right: 37px;\n        top: 56%; }\n      .activity.activePc .search_input_container_wraper ._crossIcon {\n        position: absolute;\n        top: 18px;\n        right: 2px;\n        padding: 10px;\n        background-color: #fff;\n        cursor: pointer; }\n    .activity.activePc .searchContainer .actrajaxWraper {\n      position: absolute;\n      left: 10px;\n      right: 10px;\n      z-index: 1; }\n    .activity.activePc .searchContainer .DtmRcfrCloseBtn {\n      position: absolute;\n      top: 0;\n      right: 0;\n      padding: 10px 10px 0 10px !important;\n      margin-right: 1px;\n      background-color: white;\n      z-index: 2;\n      cursor: pointer; }\n      .activity.activePc .searchContainer .DtmRcfrCloseBtn svg {\n        width: 16px;\n        height: 16px; }\n    .activity.activePc .searchContainer .act_rajx {\n      position: static;\n      border-top: none !important;\n      width: auto;\n      margin-top: 0;\n      border: solid 1px #dddddd;\n      display: block;\n      background: #fff;\n      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.25);\n      padding: 5px 20px; }\n      .activity.activePc .searchContainer .act_rajx .noMatchText {\n        width: auto;\n        padding: 0 10px 5px;\n        height: auto; }\n        .activity.activePc .searchContainer .act_rajx .noMatchText .close {\n          display: block;\n          right: 8px;\n          top: 9px;\n          border: none;\n          color: black; }\n      .activity.activePc .searchContainer .act_rajx .section {\n        width: 100%; }\n        .activity.activePc .searchContainer .act_rajx .section .title {\n          border-top: none; }\n        .activity.activePc .searchContainer .act_rajx .section .item {\n          border-bottom: 1px solid #ddd; }\n      .activity.activePc .searchContainer .act_rajx .m-place {\n        margin-bottom: 0;\n        margin-left: 0; }\n        .activity.activePc .searchContainer .act_rajx .m-place .close {\n          display: block;\n          width: 30px;\n          height: 30px;\n          position: absolute;\n          top: 5px;\n          right: 6px;\n          z-index: 15;\n          color: transparent;\n          cursor: pointer;\n          border: none; }\n          .activity.activePc .searchContainer .act_rajx .m-place .close:before, .activity.activePc .searchContainer .act_rajx .m-place .close:after {\n            content: '';\n            display: block;\n            width: 20px;\n            height: 3px;\n            background-color: #444444;\n            position: absolute;\n            top: 14px;\n            left: 5px; }\n          .activity.activePc .searchContainer .act_rajx .m-place .close:before {\n            -webkit-transform: rotate(45deg);\n                    transform: rotate(45deg); }\n          .activity.activePc .searchContainer .act_rajx .m-place .close:after {\n            -webkit-transform: rotate(-45deg);\n                    transform: rotate(-45deg); }\n    .activity.activePc .searchContainer .DtmRcfrContainer {\n      position: absolute;\n      width: 660px;\n      padding: 16px 14px 0;\n      border: 1px solid #ddd;\n      background-color: #fff;\n      z-index: 1;\n      height: auto; }\n      .activity.activePc .searchContainer .DtmRcfrContainer .ntb_rcln.one_floor > .tabs > li {\n        padding: 12px 12px; }\n    .activity.activePc .searchContainer .DtmRcfrCloseBtn {\n      position: absolute;\n      top: 0;\n      right: 0;\n      padding: 10px;\n      cursor: pointer; }\n      .activity.activePc .searchContainer .DtmRcfrCloseBtn svg {\n        width: 16px;\n        height: 16px; }\n    .activity.activePc .searchContainer .Taiwantab .dtm_rcfr .tabs {\n      display: none; }\n    .activity.activePc .btn-wrap {\n      position: absolute;\n      right: 10px;\n      top: 82px; }\n",""])},393:function(e,t,_){"use strict";var n=_(16),a=_.n(n),i=(_(331),_(337),_(367),function(e){var t=e.links,_=e.targetBlank;return t.map(function(e,t){return a.a.createElement("div",{key:t},a.a.createElement("a",{href:e.href,target:_?"_blank":"_self"},e.title))})});t.a=function(e){var t=e.links,_=e.targetBlank;return a.a.createElement("div",{className:"activity_links_wrap"},a.a.createElement(i,{links:t,targetBlank:_}))}},455:function(e,t,_){"use strict";var n=_(322);t.a=function(e){var t;1===e.Foreign&&(t=e.value?{Foreign:e.Foreign,SearchCountryID:e.vLine,SearchCityID:e.vCity,OriginSearchText:e.text}:{Foreign:e.Foreign,SearchKeyword:e.txt,OriginSearchText:e.txt}),0===e.Foreign&&(t=e.value?{Foreign:e.Foreign,SearchCountryID:e.vLine,SearchAreaID:e.vLinetravel,SearchCityID:e.vLinewebarea,OriginSearchText:e.text}:{Foreign:e.Foreign,SearchKeyword:e.txt,OriginSearchText:e.txt});var _=Object(n.g)(t);"undefined"!==t.SearchKeyword&&(window.location.href="http://uactivity.liontravel.com?"+encodeURIComponent(_))}},663:function(module,__webpack_exports__,__webpack_require__){"use strict";var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(323),_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(324),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__),_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(325),_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__),_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(326),_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__),_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(328),_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__),_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(327),_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5__),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(329),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6__),react__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(16),react__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_7__),_utils__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(331),_source_config__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(337),_magaele_dtm_rcfr__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(351),_magaele_act_rajx__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(356),_utils_click_outside__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(335),_component_ActivityLinks__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(393),_activity_scss__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(367),_activity_scss__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(_activity_scss__WEBPACK_IMPORTED_MODULE_14__),_utils_useLocalStorage__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(334),dayjs__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(343),dayjs__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_16__),ForeignApp=function(_Component){function ForeignApp(props){var _this;return _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this,ForeignApp),_this=_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2___default()(this,_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3___default()(ForeignApp).call(this,props)),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this),"updateData",function(){var e=_this.props.foreignSelectData;e.txt&&_this.setState({innerValue:e.txt});var t=_source_config__WEBPACK_IMPORTED_MODULE_9__.a.keyword+"?KeyWord="+encodeURI(e.txt);_this.fetchDestnActData(t)}),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this),"_onClickItem",function(e){var t=_this.props.home;_this.setState({selectedData:[e],inputValue:e.text,showSearchResult:!1,selectedVal:e}),_this.props.onClickItem&&_this.props.onClickItem({selectedData:[e],inputValue:e.text,selectedVal:e});var _=t?"taiwanSelectData":"foreignSelectData";_this.props.onClickItem&&_this.props.onClickItem(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()({},_,e))}),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this),"_onFocusHandle",function(e){_this.setState({showSearchResult:!0})}),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this),"_onClickOutSide",function(){_this.state.innerValue&&_this.state.showSearchResult&&_this.selectActFirstItem(_this.state.actData),_this.setState({showSearchResult:!1})}),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this),"_onClickListItem",function(e,t){_this.setState({inputValue:e.txt,showSearchResult:!1,selectedVal:e},function(){_this.props.onClickItem({foreignSelectData:e})})}),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this),"updateDimensions",function(){_this.setState({width:window.innerWidth,height:window.innerHeight})}),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this),"selectActFirstItem",function(){var e=_this.state.actData[0].txt,t=_this.state.actData[0];t.dataIndex=0,_this.setState({showSearchResult:!1,inputValue:e,selectedVal:t},function(){_this.props.onClickItem({foreignSelectData:_this.state.selectedVal})})}),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this),"getDataFromServer",function(e){clearTimeout(_this.timer),_this.timer=setTimeout(function(){var t=_source_config__WEBPACK_IMPORTED_MODULE_9__.a.keyword+"?Foreign=1&Keyword="+encodeURI(e);_this.fetchDestnActData(t)},500)}),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this),"fetchDestnActData",function(e){fetch(e).then(function(e){return e.json()}).then(function(e){_this.processData(e)})}),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this),"getInputValue",function(){return _this.state.selectedVal}),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this),"onTypingFinish",function(e){_this.setState({foreignSelectData:{},inputValue:e,innerValue:e,selectedData:[],selectedVal:null}),2<=e.length&&_this.getDataFromServer(e)}),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this),"closeSearch",function(){_this.setState({showSearchResult:!1})}),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this),"_clearInput",function(){_this.onTypingFinish(""),_this.setState({showSearchResult:!1}),_this.props.onClickItem&&_this.props.onClickItem({foreignSelectData:{}})}),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this),"validataLocalstorageData",function(e){e&&(e.PostTime+6048e5<new Date(dayjs__WEBPACK_IMPORTED_MODULE_16___default()().format("YYYY-MM-DD")).getTime()?(Object(_utils_useLocalStorage__WEBPACK_IMPORTED_MODULE_15__.a)({panel:"activity",methods:"delete"}),_this.setState(function(e){return{inputValue:""}})):_this.setState({inputValue:e.destination.foreignSelectData.text||e.destination.foreignSelectData.txt}),_this.props.onClickItem&&_this.props.onClickItem({foreignSelectData:e.destination.foreignSelectData}))}),_this.state={selectedData:[],showSearchResult:!1,inputValue:"",innerValue:"",actData:[],selectedVal:null,fetchFinish:null,clientW:window.innerWidth,width:null,height:null,ticketAbroadData:{},ticketTaiwanData:{},activityData:[{title:"精選日本一日遊",href:"#"},{title:"搭巴士遊歐洲",href:"#"},{title:"全台樂園",href:"#"},{title:"超值住宿",href:"#"},{title:"水舞間特惠價",href:"#"},{title:"冰雪冰雪加拿大極光旅人達人推薦",href:"#"}]},_this.AbortController=null,eval("window.getInputValue"+_this.props.number+" = this.getInputValue"),_this}return _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5___default()(ForeignApp,_Component),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default()(ForeignApp,[{key:"componentDidMount",value:function componentDidMount(){var _this2=this,sessionData=sessionStorage.getItem(_source_config__WEBPACK_IMPORTED_MODULE_9__.a.ticketAbroad);if(sessionData&&Object(_utils__WEBPACK_IMPORTED_MODULE_8__.f)(sessionData)){var jsonData=JSON.parse(sessionData);this.setState({ticketAbroadData:jsonData})}else fetch(_source_config__WEBPACK_IMPORTED_MODULE_9__.a.ticketAbroad).then(function(e){return e.json()}).then(function(e){var t=JSON.stringify(e);_this2.setState({ticketAbroadData:e}),sessionStorage.setItem(_source_config__WEBPACK_IMPORTED_MODULE_9__.a.ticketAbroad,t)});var sessionData2=sessionStorage.getItem(_source_config__WEBPACK_IMPORTED_MODULE_9__.a.ticketTaiwan);if(sessionData2&&Object(_utils__WEBPACK_IMPORTED_MODULE_8__.f)(sessionData2)){var _jsonData=JSON.parse(sessionData2);this.setState({ticketTaiwanData:_jsonData})}else fetch(_source_config__WEBPACK_IMPORTED_MODULE_9__.a.ticketTaiwan).then(function(e){return e.json()}).then(function(e){var t=JSON.stringify(e);_this2.setState({ticketTaiwanData:e}),sessionStorage.setItem(_source_config__WEBPACK_IMPORTED_MODULE_9__.a.ticketTaiwan,t)});this.updateDimensions(),window.addEventListener("resize",this.updateDimensions),eval("window._onFocusHandle"+this.props.number+"= this._onFocusHandle"),Object(_utils_useLocalStorage__WEBPACK_IMPORTED_MODULE_15__.a)({panel:"activity",methods:"get"},function(e){_this2.validataLocalstorageData(e)})}},{key:"componentDidUpdate",value:function(e,t){e.foreignSelectData!==this.props.foreignSelectData&&this.updateData()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateDimensions)}},{key:"processData",value:function(e,t){var _=new Promise(function(t,_){e.Destinations.map(function(e){e.Foreign=e.Foreign,e.level1=e.Kind,e.level2=e.KindName,e.level3=e.Code,e.txt=e.Name,delete e.Kind,delete e.KindName,delete e.Code,delete e.Name}),t(e)}),n=e.Destinations.filter(function(e){return"1"===e.Foreign}),a=this.state.innerValue.toUpperCase();return n.sort(function(e,t){var _=e.txt.indexOf(a),n=t.txt.indexOf(a);return _<n?-1:n<_?1:-1}).sort(function(e,t){return e.level1-t.level1}),this.setState({actData:n,searchKeyWord:t,showText:"",fetchFinish:!0}),_}},{key:"render",value:function(){var e=this,t=this.state.showSearchResult,_=this.props,n=_.home,a=_.foreignSelectData,i=Object.keys(a).length&&a.value?[a.value]:[];return react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_utils_click_outside__WEBPACK_IMPORTED_MODULE_12__.a,{className:"searchContainer ".concat(n?"d-no":""),onClickOutside:function(){return e._onClickOutSide()}},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("svg",{viewBox:"0 0 10 10",display:"none"},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("path",{id:"dtm_rcfr-x",d:"M10 8.59L8.59 10 5 6.41 1.41 10 0 8.59 3.59 5 0 1.41 1.41 0 5 3.59 8.59 0 10 1.41 6.41 5z"})),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{className:"search_input_container_wraper"},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("input",{type:"text",className:"outSideSearchInput wrapper-xs m-t-sm fz-md h-sm",value:this.state.inputValue||"",ref:this.textInput,placeholder:"輸入城市、景點、體驗行程或活動名稱",onChange:function(t){e.setState({inputValue:t.target.value,innerValue:t.target.value}),e.onTypingFinish(t.target.value),0===t.target.value.length&&e.props.onClickItem&&e.props.onClickItem({foreignSelectData:{}})},onFocus:function(t){e._onFocusHandle&&e._onFocusHandle(t)},onBlur:function(t){e._onBlurHandle&&e._onBlurHandle(t)}}),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("span",{className:"_crossIcon",onClick:function(){return e._clearInput()}},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 14 14",color:"red",className:t?e.state.inputValue?"":!n&&Object.keys(a).length?"":"d-no":"d-no"},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("g",{fill:"none",fillRule:"nonzero"},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("path",{fill:"gray",d:"M7 0C3.129 0 0 3.129 0 7s3.129 7 7 7 7-3.129 7-7-3.129-7-7-7zm3.5 9.513l-.987.987L7 7.987 4.487 10.5 3.5 9.513 6.013 7 3.5 4.487l.987-.987L7 6.013 9.513 3.5l.987.987L7.987 7 10.5 9.513z"}),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("path",{d:"M-1-1h16v16H-1z"}))))),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{className:this.state.innerValue.length<=0||!this.state.showSearchResult?"d-no actrajaxWraper":"actrajaxWraper"},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{className:"DtmRcfrCloseBtn",onClick:this.closeSearch},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("svg",{viewBox:"0 0 10 10"},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("use",{xlinkHref:"#dtm_rcfr-x"}))),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_magaele_act_rajx__WEBPACK_IMPORTED_MODULE_11__.a,{containerClass:(this.state.innerValue.length<=0||!this.state.showSearchResult)&&"d-no",sectionClass:"",itemClass:"",titleClass:"",data:this.state.actData,matchWord:this.state.innerValue,closeBtnOnClick:function(){return e.setState({showSearchResult:!1})},getItemClickValue:function(t,_){return e._onClickListItem(t,_)},selectedVal:this.state.selectedVal,isFocus:this.state.showSearchResult,showText:this.state.showText,noMatchText:"很抱歉，找不到符合的項目",minimumStringQuery:"請至少輸入兩個字",minimumStringQueryLength:2,footer:!1,rules:[{title:"城市"},{title:"區域"},{title:"產品"}]})),this.state.innerValue.length<1&&react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{className:!n&&this.state.showSearchResult?"DtmRcfrContainer":"DtmRcfrContainer d-no"},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{className:"DtmRcfrCloseBtn",onClick:this._onClickOutSide},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("svg",{viewBox:"0 0 10 10"},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("use",{xlinkHref:"#dtm_rcfr-x"}))),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("span",{className:"DtmRcfrNotice m-r-sm d-b m-t-sm m-b-sm color_09"},"找不到選項？請輸入關鍵字查詢"),Object.keys(this.state.ticketAbroadData).length&&react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_magaele_dtm_rcfr__WEBPACK_IMPORTED_MODULE_10__.a,{levelKey:["vLine","vCountry","vCity"],dataResouce:this.state.ticketAbroadData,replaceRegular:/[a-zA-Z\(\)\s]/g,onClickItem:this._onClickItem,selectedData:i})),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_component_ActivityLinks__WEBPACK_IMPORTED_MODULE_13__.a,{links:this.state.activityData,targetBlank:!0}))}}]),ForeignApp}(react__WEBPACK_IMPORTED_MODULE_7__.Component);__webpack_exports__.a=ForeignApp},664:function(module,__webpack_exports__,__webpack_require__){"use strict";var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(323),_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(324),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__),_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(325),_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__),_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(326),_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__),_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(328),_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4__),_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(327),_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5__),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(329),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6__),react__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(16),react__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_7__),_utils__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(331),_source_config__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(337),_magaele_dtm_rcfr__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(351),_magaele_act_rajx__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(356),_utils_click_outside__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(335),_component_ActivityLinks__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(393),_activity_scss__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(367),_activity_scss__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(_activity_scss__WEBPACK_IMPORTED_MODULE_14__),_utils_useLocalStorage__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(334),dayjs__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(343),dayjs__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_16__),TaiwanApp=function(_Component){function TaiwanApp(props){var _this;return _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this,TaiwanApp),_this=_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2___default()(this,_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3___default()(TaiwanApp).call(this,props)),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this),"updateData",function(){var e=_this.props.taiwanSelectData;e.txt&&_this.setState({innerValue:e.txt});var t=_source_config__WEBPACK_IMPORTED_MODULE_9__.a.keyword+"?KeyWord="+encodeURI(e.txt);_this.fetchDestnActData(t)}),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this),"_onClickItem",function(e){var t=_this.props.home;_this.setState({selectedData:[e],inputValue:e.text,showSearchResult:!1,selectedVal:e}),_this.props.onClickItem&&_this.props.onClickItem({selectedData:[e],inputValue:e.text,selectedVal:e});var _=t?"taiwanSelectData":"foreignSelectData";_this.props.onClickItem&&_this.props.onClickItem(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()({},_,e))}),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this),"_onFocusHandle",function(e){_this.setState({showSearchResult:!0})}),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this),"_onClickOutSide",function(){_this.state.innerValue&&_this.state.showSearchResult&&_this.selectActFirstItem(_this.state.actData),_this.setState({showSearchResult:!1})}),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this),"_onClickListItem",function(e,t){_this.setState({inputValue:e.txt,showSearchResult:!1,selectedVal:e},function(){_this.props.onClickItem({taiwanSelectData:e})})}),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this),"updateDimensions",function(){_this.setState({width:window.innerWidth,height:window.innerHeight})}),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this),"selectActFirstItem",function(){var e=_this.state.actData[0].txt,t=_this.state.actData[0];t.dataIndex=0,_this.setState({showSearchResult:!1,inputValue:e,selectedVal:t},function(){_this.props.onClickItem({taiwanSelectData:_this.state.selectedVal})})}),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this),"getDataFromServer",function(e){clearTimeout(_this.timer),_this.timer=setTimeout(function(){var t=_source_config__WEBPACK_IMPORTED_MODULE_9__.a.keyword+"?Foreign=0&KeyWord="+encodeURI(e);_this.fetchDestnActData(t)},500)}),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this),"fetchDestnActData",function(e){fetch(e).then(function(e){return e.json()}).then(function(e){_this.processData(e)})}),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this),"getInputValue",function(){return _this.state.selectedVal}),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this),"onTypingFinish",function(e){_this.setState({inputValue:e,innerValue:e,selectedData:[],selectedVal:null}),2<=e.length&&_this.getDataFromServer(e)}),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this),"closeSearch",function(){_this.setState({showSearchResult:!1})}),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this),"_clearInput",function(){_this.onTypingFinish(""),_this.props.onClickItem&&_this.props.onClickItem({taiwanSelectData:{}})}),_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_4___default()(_this),"validataLocalstorageData",function(e){e&&(e.PostTime+6048e5<new Date(dayjs__WEBPACK_IMPORTED_MODULE_16___default()().format("YYYY-MM-DD")).getTime()?(Object(_utils_useLocalStorage__WEBPACK_IMPORTED_MODULE_15__.a)({panel:"activity",methods:"delete"}),_this.setState(function(e){return{inputValue:""}})):_this.setState({inputValue:e.destination.taiwanSelectData.text||e.destination.taiwanSelectData.txt}),_this.props.onClickItem&&_this.props.onClickItem({taiwanSelectData:e.destination.taiwanSelectData}))}),_this.state={selectedData:[],showSearchResult:!1,inputValue:"",innerValue:"",actData:[],selectedVal:null,fetchFinish:null,clientW:window.innerWidth,width:null,height:null,ticketAbroadData:{},ticketTaiwanData:{},activityData:[{title:"精選日本一日遊",href:"#"},{title:"搭巴士遊歐洲",href:"#"},{title:"全台樂園",href:"#"},{title:"超值住宿",href:"#"},{title:"水舞間特惠價",href:"#"},{title:"冰雪冰雪加拿大極光旅人達人推薦",href:"#"}]},_this.AbortController=null,_this.textInput=react__WEBPACK_IMPORTED_MODULE_7___default.a.createRef(),eval("window.getInputValue"+_this.props.number+" = this.getInputValue"),_this}return _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5___default()(TaiwanApp,_Component),_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default()(TaiwanApp,[{key:"componentDidMount",value:function componentDidMount(){var _this2=this,sessionData=sessionStorage.getItem(_source_config__WEBPACK_IMPORTED_MODULE_9__.a.ticketAbroad);if(sessionData&&Object(_utils__WEBPACK_IMPORTED_MODULE_8__.f)(sessionData)){var jsonData=JSON.parse(sessionData);this.setState({ticketAbroadData:jsonData})}else fetch(_source_config__WEBPACK_IMPORTED_MODULE_9__.a.ticketAbroad).then(function(e){return e.json()}).then(function(e){var t=JSON.stringify(e);_this2.setState({ticketAbroadData:e}),sessionStorage.setItem(_source_config__WEBPACK_IMPORTED_MODULE_9__.a.ticketAbroad,t)});var sessionData2=sessionStorage.getItem(_source_config__WEBPACK_IMPORTED_MODULE_9__.a.ticketTaiwan);if(sessionData2&&Object(_utils__WEBPACK_IMPORTED_MODULE_8__.f)(sessionData2)){var _jsonData=JSON.parse(sessionData2);this.setState({ticketTaiwanData:_jsonData})}else fetch(_source_config__WEBPACK_IMPORTED_MODULE_9__.a.ticketTaiwan).then(function(e){return e.json()}).then(function(e){var t=JSON.stringify(e);_this2.setState({ticketTaiwanData:e}),sessionStorage.setItem(_source_config__WEBPACK_IMPORTED_MODULE_9__.a.ticketTaiwan,t)});this.updateDimensions(),window.addEventListener("resize",this.updateDimensions),eval("window._onFocusHandle"+this.props.number+"= this._onFocusHandle"),Object(_utils_useLocalStorage__WEBPACK_IMPORTED_MODULE_15__.a)({panel:"activity",methods:"get"},function(e){_this2.validataLocalstorageData(e)})}},{key:"componentDidUpdate",value:function(e,t){e.taiwanSelectData!==this.props.taiwanSelectData&&this.updateData()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateDimensions)}},{key:"processData",value:function(e,t){var _=new Promise(function(t,_){e.Destinations.map(function(e){e.level1=e.Kind,e.level2=e.KindName,e.level3=e.Code,e.txt=e.Name,delete e.Kind,delete e.KindName,delete e.Code,delete e.Name}),t(e)}),n=e.Destinations.filter(function(e){return"0"===e.Foreign}),a=this.state.innerValue.toUpperCase();return n.sort(function(e,t){var _=e.txt.indexOf(a),n=t.txt.indexOf(a);return _<n?-1:n<_?1:-1}).sort(function(e,t){return e.level1-t.level1}),this.setState({actData:n,searchKeyWord:t,showText:"",fetchFinish:!0}),_}},{key:"render",value:function(){var e=this,t=this.state.showSearchResult,_=this.props,n=_.home,a=_.taiwanSelectData,i=Object.keys(a).length&&a.value?[a.value]:[];return react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_utils_click_outside__WEBPACK_IMPORTED_MODULE_12__.a,{className:"searchContainer ".concat(n?"":"d-no"),onClickOutside:function(){return e._onClickOutSide()}},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("svg",{viewBox:"0 0 10 10",display:"none"},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("path",{id:"dtm_rcfr-x",d:"M10 8.59L8.59 10 5 6.41 1.41 10 0 8.59 3.59 5 0 1.41 1.41 0 5 3.59 8.59 0 10 1.41 6.41 5z"})),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{className:"search_input_container_wraper"},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("input",{type:"text",className:"outSideSearchInput wrapper-xs m-t-sm fz-md h-sm font-bold ",value:this.state.inputValue||"",ref:this.textInput,placeholder:"輸入城市、景點、體驗行程或活動名稱",onChange:function(t){e.setState({inputValue:t.target.value,innerValue:t.target.value}),e.onTypingFinish(t.target.value),0===t.target.value.length&&e.props.onClickItem&&e.props.onClickItem({taiwanSelectData:{}})},onFocus:function(t){e._onFocusHandle&&e._onFocusHandle(t)},onBlur:function(t){e._onBlurHandle&&e._onBlurHandle(t)}}),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("span",{className:"_crossIcon",onClick:function(){return e._clearInput()}},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 14 14",color:"red",className:t?e.state.inputValue?"":n&&Object.keys(a).length?"":"d-no":"d-no"},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("g",{fill:"none",fillRule:"nonzero"},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("path",{fill:"gray",d:"M7 0C3.129 0 0 3.129 0 7s3.129 7 7 7 7-3.129 7-7-3.129-7-7-7zm3.5 9.513l-.987.987L7 7.987 4.487 10.5 3.5 9.513 6.013 7 3.5 4.487l.987-.987L7 6.013 9.513 3.5l.987.987L7.987 7 10.5 9.513z"}),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("path",{d:"M-1-1h16v16H-1z"}))))),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{className:this.state.innerValue.length<=0||!this.state.showSearchResult?"d-no actrajaxWraper":"actrajaxWraper"},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{className:"DtmRcfrCloseBtn",onClick:this.closeSearch},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("svg",{viewBox:"0 0 10 10"},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("use",{xlinkHref:"#dtm_rcfr-x"}))),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_magaele_act_rajx__WEBPACK_IMPORTED_MODULE_11__.a,{containerClass:(this.state.innerValue.length<=0||!this.state.showSearchResult)&&"d-no",sectionClass:"",itemClass:"",titleClass:"",data:this.state.actData,matchWord:this.state.innerValue,closeBtnOnClick:function(){return e.setState({showSearchResult:!1})},getItemClickValue:function(t,_){return e._onClickListItem(t,_)},selectedVal:this.state.selectedVal,isFocus:this.state.showSearchResult,showText:this.state.showText,noMatchText:"很抱歉，找不到符合的項目",minimumStringQuery:"請至少輸入兩個字",minimumStringQueryLength:2,footer:!1,rules:[{title:"城市"},{title:"區域"},{title:"產品"}]})),this.state.innerValue.length<1&&react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{className:n&&this.state.showSearchResult?"DtmRcfrContainer Taiwantab":"DtmRcfrContainer d-no"},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("div",{className:"DtmRcfrCloseBtn",onClick:this._onClickOutSide},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("svg",{viewBox:"0 0 10 10"},react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("use",{xlinkHref:"#dtm_rcfr-x"}))),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement("span",{className:"DtmRcfrNotice m-r-sm d-b m-t-sm m-b-sm color_09 font-normal"},"找不到選項？請輸入關鍵字查詢"),Object.keys(this.state.ticketTaiwanData).length&&react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_magaele_dtm_rcfr__WEBPACK_IMPORTED_MODULE_10__.a,{levelKey:["vLine","vLinetravel","vLinewebarea"],dataResouce:this.state.ticketTaiwanData,replaceRegular:/[a-zA-Z\(\)\s]/g,onClickItem:this._onClickItem,selectedData:i})),react__WEBPACK_IMPORTED_MODULE_7___default.a.createElement(_component_ActivityLinks__WEBPACK_IMPORTED_MODULE_13__.a,{links:this.state.activityData,targetBlank:!0}))}}]),TaiwanApp}(react__WEBPACK_IMPORTED_MODULE_7__.Component);__webpack_exports__.a=TaiwanApp}}]);