(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{344:function(t,e,n){(t.exports=n(332)(!1)).push([t.i,".calendar_compose {\n  position: relative; }\n  .calendar_compose .content {\n    padding: 30px 10px 10px;\n    border: solid 1px #ddd;\n    background-color: #fff;\n    position: absolute;\n    top: 100%;\n    left: 0;\n    z-index: 5; }\n    .calendar_compose .content .close_btn {\n      position: absolute;\n      width: 30px;\n      height: 30px;\n      right: 0;\n      top: 0;\n      z-index: 1;\n      background-color: transparent;\n      border: none;\n      font-weight: bold;\n      outline: none;\n      cursor: pointer; }\n      .calendar_compose .content .close_btn:before, .calendar_compose .content .close_btn:after {\n        content: '';\n        display: block;\n        width: 20px;\n        height: 3px;\n        background-color: #444444;\n        position: absolute;\n        top: 14px;\n        left: 5px; }\n      .calendar_compose .content .close_btn:before {\n        -webkit-transform: rotate(45deg);\n                transform: rotate(45deg); }\n      .calendar_compose .content .close_btn:after {\n        -webkit-transform: rotate(-45deg);\n                transform: rotate(-45deg); }\n    .calendar_compose .content .cy_rcln {\n      display: inline-flex;\n      position: relative;\n      height: auto;\n      background-color: transparent;\n      padding: 0; }\n    .calendar_compose .content .calendar_box {\n      border: solid 1px #e3e3e3; }\n      .calendar_compose .content .calendar_box:not(:last-child) {\n        margin-right: 10px; }\n    .calendar_compose .content .date {\n      min-width: 40px;\n      height: 40px; }\n    .calendar_compose .content .year_month .title {\n      margin-bottom: 10px;\n      color: #222; }\n    .calendar_compose .content .date_box {\n      width: 100%; }\n      .calendar_compose .content .date_box .txt {\n        margin-top: 0px; }\n    .calendar_compose .content .week {\n      height: auto; }\n      .calendar_compose .content .week > span {\n        font-size: 12px; }\n  .calendar_compose .active .today:after {\n    display: none; }\n",""])},353:function(t,e,n){var a=n(344);"string"==typeof a&&(a=[[t.i,a,""]]);var o=n(333)(a,{hmr:!0,transform:void 0,insertInto:void 0});a.locals&&(t.exports=a.locals),t.hot.accept(344,function(){var e=n(344);if("string"==typeof e&&(e=[[t.i,e,""]]),!function(t,e){var n,a=0;for(n in t){if(!e||t[n]!==e[n])return!1;a++}for(n in e)a--;return 0===a}(a.locals,e.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");o(e)}),t.hot.dispose(function(){o()})},355:function(t,e,n){"use strict";var a=n(330),o=n.n(a),r=n(338),s=n.n(r),i=n(340),l=n.n(i),c=n(345),u=n.n(c),d=n(323),p=n.n(d),h=n(324),m=n.n(h),f=n(325),g=n.n(f),v=n(326),D=n.n(v),y=n(328),_=n.n(y),S=n(327),x=n.n(S),k=n(329),w=n.n(k),b=n(16),C=n.n(b),M=n(343),E=n.n(M),T=n(362),N=n(336),Y=n(339),I=n(331),O=(n(353),n(348),function(t){function e(t){var n;return p()(this,e),n=g()(this,D()(e).call(this,t)),w()(_()(n),"setDefaultDate",function(){n.setState({selectedStartDate:n.props.defaultStartDate||"",selectedEndDate:n.props.defaultEndDate||"",startInputValue:n.props.defaultStartDate||"",endInputValue:n.props.defaultEndDate||""})}),w()(_()(n),"clearValue",function(t){return"start"===t?n.setState(function(t){return u()({},t,{startInputValue:"",selectedStartDate:""})},n.onChange):n.setState(function(t){return u()({},t,{selectedEndDate:"",endInputValue:""})},n.onChange)}),w()(_()(n),"closeCalendar",function(){n.setState(function(t){return u()({},t,{activeInput:null})})}),w()(_()(n),"customIsAfterOtherEnd",function(){var t=n.props.panelName,e=n.state.selectedStartDate;switch(t){case"hotel":return alert("單次訂購一次最多14晚"),void n.clickDate(E()(e).add(14,"day").format("YYYY-MM-DD"));case"":default:return alert("無效的日期"),void n.clickDate("")}}),w()(_()(n),"customIsBefore",function(){var t="日期必須大於今日";switch(n.props.panelName){case"travel":case"taiwanVacation":t="最晚日期不得小於最早日期！";break;case"hotel":t="退房日期不得小於入住日期！";break;case"vacationPersonal":t="回程日期不得小於去程日期！";break;case"":default:t="日期必須大於今日"}alert(t)}),w()(_()(n),"checkDate",function(t){var e="start"===t,a=n.state,o=a.selectedStartDate,r=a.selectedEndDate,s=a.startInputValue,i=a.endInputValue,c=n.props,u=c.setOtherEnd,d=c.setStartDate,p=e?s:i,h=/^(\d{4})[\-\/]?(\d{2})[\-\/]?(\d{2})$/;if(!(e?p===o:p===r)){4===p.length&&(h=/^()(\d{2})(\d{2})/),3===p.length&&(h=/^()(\d{1})(\d{2})/);var m=p.match(h),f=function(){var t=o?E()(o).add(1,"day"):E()().add(d||0,"day"),a=e||o?0:1;n.clickDate(t.add(a,"day").format("YYYY-MM-DD"))};if(p&&null===m)return alert("請輸入正確的日期格式(YYYYMMDD) EX: 2018/01/01"),void f();1===m[2].length&&(m[2]="0"+m[2]);var g,v=l()(m,4),D=(v[0],v[1]),y=v[2],_=v[3],S="".concat(D||E()().year(),"-").concat(y,"-").concat(_),x=E()(S),k=n.calcStartDate(),w=E()().format("YYYY-MM-DD");return(g=new Date(S))instanceof Date&&!isNaN(g)&&Object(I.g)(S)?x.isBefore(w)?(alert("日期必須大於今日"),void f()):x.isBefore(k)?(e?alert("日期必須大於今日"):n.customIsBefore(),void f()):void(function(t){if(e)return!1;var n=E()(o).add(u,"day");return E()(t).isAfter(n)}(S)?n.customIsAfterOtherEnd():n.clickDate(S)):(alert("無效的日期"),void f())}}),w()(_()(n),"inputChange",function(t){var e=t.target.value,a=n.state.activeInput,o="".concat(a,"InputValue");"hotel"===n.props.panelName&&(o="".concat("start"===a?"start":"end","InputValue")),n.setState(function(t){return u()({},t,w()({},o,e))},n.onChange)}),w()(_()(n),"inputKeyDown",function(t,e){13===t.keyCode&&(n.cIntRcln.inputDOM.blur(),n.cIntRcln2.inputDOM.blur(),n.setState({activeInput:null}))}),w()(_()(n),"inputFocus",function(t){var e=n.state,a=e.selectedStartDate,o=e.startInputValue,r=t;"hotel"===n.props.panelName&&"end"===t&&""===a&&""===o&&(r=null),n.setState(function(t){return u()({},t,{activeInput:r})})}),w()(_()(n),"startDateValueRule",function(t){var e=n.state,a=e.activeInput,o=e.selectedStartDate,r="start"===a;switch(n.props.panelName){case"":default:return r?t:o}}),w()(_()(n),"clickDate",function(t){var e=n.state,a=e.activeInput,o=e.activeEnd,r=n.props,s=r.setOtherEnd,i=r.setActiveEnd,l="start"===a,c=n.startDateValueRule(t),u=l?"":t,d=Number(E()(c).add(s,"day").format("YYYYMM")),p=Number(o.split("-").join("")),h=o;l&&p<d&&(h=E()().add(i+1,"months").format("YYYY-MM")),n.setState(function(t){return{activeInput:l?"end":null,selectedStartDate:c,selectedEndDate:u,startInputValue:c,endInputValue:u,activeEnd:h}},n.onChange)}),n.state={selectedStartDate:"",selectedEndDate:"",startInputValue:"",endInputValue:"",activeInput:null,endDate:"",activeEnd:E()().add(n.props.setActiveEnd,"months").format("YYYY-MM")},n}return x()(e,t),m()(e,[{key:"componentDidMount",value:function(){var t=this;setTimeout(function(){t.setDefaultDate()},0)}},{key:"onChange",value:function(){this.props.onChange(this.state)}},{key:"calcStartDate",value:function(){var t=this.state,e=t.selectedStartDate,n=t.activeInput,a=this.props.setStartDate,o=E()();return"end"===n?"number"==typeof a?e.length?e:o.add(a,"day").format("YYYY-MM-DD"):e.length?e:o.format("YYYY-MM-DD"):"number"==typeof a?o.add(a,"day").format("YYYY-MM-DD"):o.format("YYYY-MM-DD")}},{key:"diffDate",value:function(){var t=this.state,e=t.startInputValue,n=t.endInputValue;if(!e.length||!n.length||e.length!==n.length)return"";var a=new Date(e.replace(/\-/g,"/")).getTime();return(new Date(n.replace(/\-/g,"/")).getTime()-a)/864e5}},{key:"setEndDay",value:function(){var t=this.props,e=t.setEndDate,n=t.setOtherEnd,a=this.state,o=a.selectedStartDate,r=a.activeInput;return n&&""!==o&&"start"!==r?E()(o).add(n,"days").format("YYYY-MM-DD"):E()().add(e,"months").format("YYYY-MM-DD")}},{key:"render",value:function(){var t=this,e=this.state,n=e.selectedStartDate,a=e.selectedEndDate,r=e.startInputValue,i=e.endInputValue,l=e.activeInput,c=e.activeEnd,u=this.props,d=u.totleNights,p=u.titleTxt,h=u.startTxt,m=u.endTxt,f=(u.setActiveEnd,u.setOtherEnd,s()(u,["totleNights","titleTxt","startTxt","endTxt","setActiveEnd","setOtherEnd"])),g=this.calcStartDate(),v=this.setEndDay();return C.a.createElement(I.a,{onClickOutside:this.closeCalendar},C.a.createElement("div",{className:"calendar_compose"},C.a.createElement("div",{className:"input_group"},C.a.createElement(N.a,{ref:function(e){t.cIntRcln=e},request:!0,placeholder:"YYYY/MM/DD",label:p,icon:C.a.createElement(Y.a,{name:"tooldate",onClick:function(){return t.cIntRcln.inputDOM.focus()}}),onFocus:function(){t.inputFocus("start")},onChange:this.inputChange,onKeyDown:function(e){return t.inputKeyDown(e,"start")},onBlur:function(){t.checkDate("start")},onClearValue:function(){t.clearValue("start")},value:r.replace(/\-/g,"/")}),C.a.createElement("span",{className:"cal_icon"},"~"),C.a.createElement(N.a,{ref:function(e){t.cIntRcln2=e},request:!0,placeholder:"YYYY/MM/DD",onChange:this.inputChange,onKeyDown:function(e){return t.inputKeyDown(e,"end")},onFocus:function(){t.inputFocus("end")},onBlur:function(){t.checkDate("end")},onClearValue:function(){t.clearValue("end")},value:i.replace(/\-/g,"/")}),0<this.diffDate()&&d?C.a.createElement("span",{className:"nights"},"，共".concat(this.diffDate(),"晚")):null),null===l?null:C.a.createElement("div",{className:"content"},C.a.createElement("button",{className:"close_btn",onClick:this.closeCalendar}),C.a.createElement(T.a,o()({doubleMonth:!0,doubleChoose:!0,startTxt:h,endTxt:m,startDate:g,activeStart:E()().format("YYYY-MM"),endDate:v,activeEnd:c,selectedStartDate:n,selectedEndDate:a,onDateClick:this.clickDate},f)))))}}]),e}(b.PureComponent));w()(O,"defaultProps",{onChange:function(){},setEndDate:12,setActiveEnd:120,titleTxt:"出發區間",panelName:""}),e.a=O},462:function(t,e,n){(t.exports=n(332)(!1)).push([t.i,".high_speed_rail_pc .SingleInputMenu .dtm_rcfr {\n  position: relative; }\n  .high_speed_rail_pc .SingleInputMenu .dtm_rcfr .sec_all {\n    text-decoration: none !important;\n    cursor: default; }\n  .high_speed_rail_pc .SingleInputMenu .dtm_rcfr-row {\n    display: flex; }\n  .high_speed_rail_pc .SingleInputMenu .dtm_rcfr-wrap {\n    display: none;\n    position: absolute;\n    top: 100%;\n    left: -1px;\n    width: 690px;\n    padding: 16px 14px 0;\n    background-color: #fff;\n    z-index: 11;\n    border: 1px solid #ddd; }\n    .high_speed_rail_pc .SingleInputMenu .dtm_rcfr-wrap.open {\n      display: block; }\n  .high_speed_rail_pc .SingleInputMenu .dtm_rcfr-label {\n    margin: 0 0 12px;\n    font-size: 14px;\n    color: #24a07d; }\n  .high_speed_rail_pc .SingleInputMenu .dtm_rcfr-close_btn {\n    position: absolute;\n    top: 0;\n    right: 0;\n    padding: 16px;\n    cursor: pointer; }\n    .high_speed_rail_pc .SingleInputMenu .dtm_rcfr-close_btn svg {\n      width: 16px;\n      height: 16px; }\n  .high_speed_rail_pc .SingleInputMenu .dtm_rcfr-selected-wrap {\n    white-space: nowrap; }\n  .high_speed_rail_pc .SingleInputMenu .dtm_rcfr-selected {\n    display: inline-flex;\n    align-items: center;\n    justify-content: space-between;\n    width: 107px;\n    line-height: 1.3;\n    margin: 0 4px 0 0;\n    padding-left: 4px;\n    font-size: 16px;\n    color: #0077b3;\n    background-color: #eaeaea;\n    cursor: pointer; }\n    .high_speed_rail_pc .SingleInputMenu .dtm_rcfr-selected:last-of-type {\n      margin: 0; }\n    .high_speed_rail_pc .SingleInputMenu .dtm_rcfr-selected span {\n      width: 80px;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap; }\n    .high_speed_rail_pc .SingleInputMenu .dtm_rcfr-selected i {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      width: 20px;\n      height: 20px; }\n    .high_speed_rail_pc .SingleInputMenu .dtm_rcfr-selected svg {\n      width: 6px;\n      height: 6px;\n      fill: #999; }\n\n.high_speed_rail_pc .SingleInputMenu .act_racp {\n  left: 0;\n  min-width: 100%; }\n\n.high_speed_rail_pc .SingleInputMenu .int_rctg .dtm_rcfr {\n  width: auto;\n  height: auto; }\n\n.high_speed_rail_pc .SingleInputMenu .int_rcln {\n  height: auto; }\n  .high_speed_rail_pc .SingleInputMenu .int_rcln_input {\n    border: none;\n    padding: 0;\n    color: #0077b3; }\n\n.high_speed_rail_pc .SingleInputMenu .int_rctg {\n  padding-right: 0; }\n  .high_speed_rail_pc .SingleInputMenu .int_rctg .int_rcln_input {\n    flex: 0 0 auto; }\n\n.high_speed_rail_m .SingleInputMenu .dtm_rcfr-wrap {\n  top: 0;\n  width: auto;\n  border: none; }\n\n.high_speed_rail_m .SingleInputMenu .int_rcln_input {\n  font-weight: normal; }\n",""])},667:function(t,e,n){var a=n(462);"string"==typeof a&&(a=[[t.i,a,""]]);var o=n(333)(a,{hmr:!0,transform:void 0,insertInto:void 0});a.locals&&(t.exports=a.locals),t.hot.accept(462,function(){var e=n(462);if("string"==typeof e&&(e=[[t.i,e,""]]),!function(t,e){var n,a=0;for(n in t){if(!e||t[n]!==e[n])return!1;a++}for(n in e)a--;return 0===a}(a.locals,e.locals))throw new Error("Aborting CSS HMR due to changed css-modules locals.");o(e)}),t.hot.dispose(function(){o()})},669:function(t,e,n){"use strict";n.r(e);var a=n(340),o=n.n(a),r=n(347),s=n.n(r),i=n(323),l=n.n(i),c=n(324),u=n.n(c),d=n(325),p=n.n(d),h=n(326),m=n.n(h),f=n(328),g=n.n(f),v=n(327),D=n.n(v),y=n(329),_=n.n(y),S=n(330),x=n.n(S),k=(n(406),n(16)),w=n.n(k),b=n(337),C=n(350),M=n(346),E=n(339),T=n(342),N=n(356),Y=n(331),I=n(495),O=n(354),A=n(355),F=n(122),L=n.n(F),W=n(351),B=n(357),V=n(336),R=(n(667),[{catalogueName:"城市",catafilter:function(t){return t}}]),H=function(t){return t.forEach(function(t){t.txt="".concat(t.text)}),t},P=JSON.parse('{ "vLine": { "_9": "台灣" } }'),j=function(t){function e(t){var n;return l()(this,e),n=p()(this,m()(e).call(this,t)),_()(g()(n),"getData",function(t){var e=sessionStorage.getItem(t);if(e&&Object(Y.f)(e)){var a=JSON.parse(e);n.setState({destinationDtm:x()(a,P)}),n._getDataCallBack(a)}else Object(Y.c)(t,function(e){var a=JSON.stringify(e);n.setState({destinationDtm:x()(e,P)}),n._getDataCallBack(e),sessionStorage.setItem(t,a)})}),_()(g()(n),"_getDataCallBack",function(t){var e=[],a=Object.keys(t.vArea._9);a.map(function(n,o){var r=Object.keys(t.vTcity[a[o]]);r.map(function(n,s){var i=r[s],l=t.vTcity[a[o]][r[s]],c={vArea:a[o],vLineText:t.vArea._9["".concat(a[o])],vLinewebarea:"_",vLinetravel:i,vLinetravelText:l,text:"".concat(l,"-").concat(t.vArea._9["".concat(a[o])]),vTcity:"".concat(i),value:"_9-".concat(a[o],"-").concat(i)};e.push(c)})}),n.setState({destinationAct:e})}),_()(g()(n),"emitPushData",function(t){var e=n.props.selectedData,a=0<e.length?e[0].text+"-"+e[0].vLinetravelText:"",o=t?t.text+"-"+t.vLinetravelText:"",r=a===o?"":o;t?(n.props.onChange&&n.props.onChange(t),n.setState({keyword:r,showDtm:!1})):(n.setState({keyword:"",showDtm:!0}),n.props.onChange&&n.props.onChange(""))}),_()(g()(n),"handleOpenMenuFocus",function(){n.setState({showDtm:!0,showAct:!1})}),_()(g()(n),"handleOpenMenuDown",function(){n.state.keyword?n.setState({showDtm:!1,showAct:!0}):n.setState({showDtm:!0,showAct:!1})}),_()(g()(n),"handleCloseMenu",function(){var t=n.props.selectedData,e=n.state.keyword;if(0<t.length){var a=t?t[0].text:"";e.length!==a.length&&n.setState({keyword:a,showDtm:!1,showAct:!1})}n.setState({showDtm:!1,showAct:!1})}),_()(g()(n),"handleEmitRemoveData",function(t,e){n.emitPushData("")}),_()(g()(n),"handleLabelWrapClick",function(){n.searchInput.current.inputDOM.focus()}),_()(g()(n),"handleChange",function(t){t.target.value?n.setState({keyword:t.target.value,showAct:!0,showDtm:!1}):(n.setState({keyword:"",showAct:!1,showDtm:!0}),n.props.onChange&&n.props.onChange(""))}),_()(g()(n),"handleFocus",function(){n.searchInput.current.inputDOM.focus()}),n.searchInput=w.a.createRef(),n.state={keyword:"",showDtm:!1,destinationDtm:{},showAct:!1,destinationAct:{}},n}return D()(e,t),u()(e,[{key:"componentDidMount",value:function(){this.getData(this.props.fetchPath)}},{key:"UNSAFE_componentWillReceiveProps",value:function(t){var e=t.selectedData.length?t.selectedData[0].text:"";this.setState({keyword:e})}},{key:"render",value:function(){var t=this,e=this.props,n=e.placeholder,a=e.minimumStringQueryLength,o=e.minimumStringQuery,r=e.noMatchText,s=e.label,i=e.subLabel,l=(e.fetchPath,e.isRequired),c=e.size,u=e.iconName,d=e.selectedData,p=this.state,h=p.keyword,m=p.showAct,f=p.destinationAct,g=p.showDtm,v=p.destinationDtm,D=d.map(function(t){return t.value});return w.a.createElement("div",{className:"SingleInputMenu"},w.a.createElement(O.a,{isRequired:l,size:c,label:s,iconName:u,onClick:this.handleOpenMenuFocus,subComponent:w.a.createElement(Y.a,{onClickOutside:this.handleCloseMenu},w.a.createElement("svg",{viewBox:"0 0 10 10",display:"none"},w.a.createElement("path",{id:"dtm_rcfr-x",d:"M10 8.59L8.59 10 5 6.41 1.41 10 0 8.59 3.59 5 0 1.41 1.41 0 5 3.59 8.59 0 10 1.41 6.41 5z"})),w.a.createElement("div",{className:"dtm_rcfr-row"},w.a.createElement(V.a,{isRequired:!0,className:"int_rcln int-tags-single",ref:this.searchInput,placeholder:n,onKeyDown:this.handleOpenMenuDown,onFocus:this.handleOpenMenuFocus,value:h,onChange:function(e){return t.handleChange(e)},onClearValue:function(e){return t.handleEmitRemoveData(e,d)}})),Object.keys(f).length&&!d.length&&w.a.createElement(B.a,{InputIsFocus:m,url:f,minimumStringQueryLength:a,minimumStringQuery:o,searchKeyWord:h,noMatchText:r,ClassName:!m&&"d-no",footer:!1,theme:"future",closeActcallback:function(e){void 0!==e?(t.setState({showAct:!1,keyword:""}),t.emitPushData(e)):t.handleCloseMenu()},changeKey:H,catalogue:R}),w.a.createElement("div",{className:"dtm_rcfr-wrap ".concat(g?"open":null)},w.a.createElement("p",{className:"dtm_rcfr-label"},i),w.a.createElement("span",{className:"dtm_rcfr-close_btn",onClick:function(e){e.stopPropagation(),t.handleCloseMenu()}},w.a.createElement("svg",{viewBox:"0 0 10 10"},w.a.createElement("use",{xlinkHref:"#dtm_rcfr-x"}))),Object.keys(v).length&&w.a.createElement(W.a,{levelKey:["vLine","vArea","vTcity"],onClickItem:this.emitPushData,dataResouce:v,selectedData:D})))}))}}]),e}(k.Component);_()(j,"defaultProps",{max:3,minimumStringQueryLength:2}),_()(j,"propTypes",{fetchPath:L.a.string.isRequired,selectedData:L.a.array.isRequired,max:L.a.number,placeholder:L.a.string,minimumStringQueryLength:L.a.number.isRequired,minimumStringQuery:L.a.string,noMatchText:L.a.string,label:L.a.string,onChange:L.a.func});var K=j,q=n(89),J=n.n(q),Q=n(496),z=n(407),U=function(t){function e(){var t,n;l()(this,e);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return n=p()(this,(t=m()(e)).call.apply(t,[this].concat(r))),_()(g()(n),"state",{roomList:[{adult:2,childrenWithBed:[],childrenNoBed:[]}],maxPeople:8,maxChild:3,childForSingleAdult:2,minAdult:1,inputText:"共1間，2人",showDropDown:!1}),_()(g()(n),"updatePanelRooms",function(){var t=n.props,e=t.roomlist,a=t.roomage,o=e.split(",").map(function(t){return t.split("-").filter(function(t){return t.length}).map(function(t){return Number(t)})}),r=a.split(",").map(function(t){return t.split("-").map(function(t){return t.split(";").filter(function(t){return t.length}).map(function(t){return Number(t)})})}),s=o.map(function(t,e){return{adult:o[e][0],childrenWithBed:r[e][0],childrenNoBed:r[e][1]}}),i=Object(z.c)(s);n.setState({roomList:s,inputText:i})}),_()(g()(n),"changeRoomCount",function(t){var e=n.state.roomList,a=t.target.value,o=Number(a),r={adult:1,childrenWithBed:[],childrenNoBed:[]};if(o!==e.length){for(var s=[],i=0;i<o;i++)s.push(r);var l=Object(z.c)(s);n.setState(function(t){return{inputText:l,roomList:s}})}}),_()(g()(n),"closMenu",function(){n.setState(function(t){return{showDropDown:!1}})}),_()(g()(n),"onClickInput",function(){n.setState(function(t){return{showDropDown:!0}})}),_()(g()(n),"onClickAdd",function(t,e){var a=n.state,r=a.maxPeople,s=a.maxChild,i=a.childForSingleAdult,l=n.calcPeopleInfo(),c=o()(l,4),u=c[0],d=c[1],p=c[2],h=c[3];if(!(r<u+1)){if("childrenWithBed"===e||"childrenNoBed"===e){var m=p+h+1;if(1===d&&i<m)return;if(s<m)return}n.setState(function(n){var a=JSON.parse(JSON.stringify(n.roomList)),o=a[t][e];return"adult"!==e?o.push(0):a[t][e]=o+1,{roomList:a,inputText:Object(z.c)(a)}})}}),_()(g()(n),"onClickMinus",function(t,e){var a=n.state.minAdult,o=JSON.parse(JSON.stringify(n.state.roomList)),r=o[t][e];if("adult"===e){if(r===a)return;o[t][e]=r-1,o=o.map(function(t){return{adult:t.adult,childrenWithBed:[],childrenNoBed:[]}})}else{if(0===r.length)return;r.pop()}var s=Object(z.c)(o);n.setState(function(t){return{roomList:o,inputText:s}})}),_()(g()(n),"onChangeChildAge",function(t,e,a,o){var r=s()(n.state.roomList),i=Number(o);r[t][e][a]=i,n.setState(function(t){return{roomList:r}})}),n}return D()(e,t),u()(e,[{key:"componentDidMount",value:function(){this.props.onChange(this.state)}},{key:"componentDidUpdate",value:function(t,e){e!==this.state&&this.props.onChange(this.state),t!==this.props&&this.updatePanelRooms()}},{key:"calcPeopleInfo",value:function(){for(var t=this.state.roomList,e=0,n=0,a=0,o=0,r=0;r<t.length;r++){var s=t[r].adult,i=t[r].childrenWithBed.length,l=t[r].childrenNoBed.length;n+=s,a+=i,o+=l,e=e+s+i+l}return[e,n,a,o]}},{key:"render",value:function(){var t=this,e=this.props.noHotel,n=this.state,a=n.roomList,o=n.inputText,r=n.showDropDown,s=J()("room_list_wrap_container",{"d-no":!r});return w.a.createElement(Y.a,{onClickOutside:this.closMenu},w.a.createElement("div",{className:"input_compose roomListInput"},w.a.createElement(V.a,{placeholder:e?"N人":"共N間，N人",label:e?"人數":"間數/人數",breakline:!0,readOnly:!0,value:e?o.split("，")[1]:o,onClick:this.onClickInput,icon:w.a.createElement(E.a,{name:"toolmember"}),className:"m-b-sm"}),w.a.createElement("div",{className:s},w.a.createElement(Q.a,{onClick:this.closMenu}),!e&&w.a.createElement("label",{className:"room_count_select"},w.a.createElement("select",{onChange:this.changeRoomCount,value:a.length},Q.b.map(function(t){return w.a.createElement("option",{key:t.value,value:t.value},t.text)}))),a.length&&a.map(function(n,a){return w.a.createElement(z.b,{key:a,noHotel:e,roomCount:a,adult:n.adult,childrenWithBed:n.childrenWithBed,childrenNoBed:n.childrenNoBed,onClickAdd:t.onClickAdd,onClickMinus:t.onClickMinus,onChangeChildAge:t.onChangeChildAge})}),w.a.createElement(z.a,null))))}}]),e}(k.PureComponent),G=n(343),X=n.n(G),$=(n(497),n(387),[{text:"不限",value:"_"},{text:"台北",value:"_TPE"},{text:"板橋",value:"_PAN"},{text:"桃園",value:"_TAO"},{text:"新竹",value:"_HCU"},{text:"苗栗",value:"_MLI"},{text:"台中",value:"_TCH"},{text:"彰化",value:"_CHA"},{text:"南投",value:"_NTO"},{text:"雲林",value:"_YLI"},{text:"嘉義",value:"_CYI"},{text:"台南",value:"_TNN"},{text:"高雄",value:"_KHH"},{text:"屏東",value:"_PIN"},{text:"花蓮",value:"_HLN"},{text:"台東",value:"_TTT"}]),Z={display:"inline-block",marginBottom:"10px",width:"100%",verticalAlign:"top"},tt={marginBottom:"10px"},et=function(t){function e(t){var n;return l()(this,e),n=p()(this,m()(e).call(this,t)),_()(g()(n),"updateSelectedData",function(){var t=n.props.selectedData;n.setState({selectedData:t})}),_()(g()(n),"switch",function(){var t=JSON.parse(JSON.stringify(n.state.dptSelectedData)),e=JSON.parse(JSON.stringify(n.state.dtnSelectedData));n.setState({dptSelectedData:e,dtnSelectedData:t})}),_()(g()(n),"dptHandleChange",function(t){var e=n.state.dptSelectedData,a=[];e.some(function(e){return t.value===e.value})?a=e.filter(function(e){return t.value!==e.value}):t.value&&a.push(t),n.setState({dptSelectedData:a})}),_()(g()(n),"dtnHandleChange",function(t){var e=n.state.dtnSelectedData,a=[];e.some(function(e){return t.value===e.value})?a=e.filter(function(e){return t.value!==e.value}):t.value&&a.push(t),n.setState({dtnSelectedData:a})}),_()(g()(n),"handleChange",function(t){var e=[];if(t.value&&e.push(t),n.setState({selectedData:e}),0<e.length){n.props.getSelectedData(e);var a=e[0].vTcity.replace("_","");n.props.getdatavTcity(a)}else n.props.getdatavTcity("")}),_()(g()(n),"setValue",function(t){n.setState({obj:t})}),n.state={selectedData:n.props.selectedData?n.props.selectedData:[],dptSelectedData:[],dtnSelectedData:[]},n.fetchPath=b.j.destination,n}return D()(e,t),u()(e,[{key:"componentDidUpdate",value:function(t,e){t.selectedData!==this.props.selectedData&&this.updateSelectedData()}},{key:"render",value:function(){var t=this.state.selectedData;return w.a.createElement("div",{style:x()({},x()({},tt,Z))},w.a.createElement(w.a.Fragment,null,w.a.createElement(K,{className:"SingleInputMenu m-b-sm",isRequired:!0,size:"lg",label:"目的地",iconName:"toolmap",fetchPath:this.fetchPath,selectedData:t,placeholder:"請選擇/可輸入目的地",minimumStringQueryLength:2,minimumStringQuery:"請輸入至少兩個文字",noMatchText:"很抱歉，找不到符合的項目",subLabel:"找不到選項？請輸入關鍵字查詢",onChange:this.handleChange})))}}]),e}(k.Component),nt=function(t){function e(t){var n;return l()(this,e),n=p()(this,m()(e).call(this,t)),_()(g()(n),"updatekeyWord",function(){n.setState({searchKeyWord:n.props.keyWord,selectText:n.props.keyWord}),n._inputOnChangeHandler(n.props.keyWord)}),_()(g()(n),"clearShowData",function(){n.setState({showData:[]})}),_()(g()(n),"closeDestnMenu",function(){var t=n.state,e=t.searchKeyWord;e===t.selectText&&n.props.getkeywordtxt(e),n.setState({isFocus:!1})}),n.state={data:[],searchKeyWord:n.props.keyWord?n.props.keyWord:"",selectText:n.props.keyWord?n.props.keyWord:"",isFocus:!1,show:!1},n.fetchData=n.fetchData.bind(g()(n)),n.AbortController=null,n}return D()(e,t),u()(e,[{key:"componentDidUpdate",value:function(t,e){t.keyWord!==this.props.keyWord&&this.updatekeyWord(),t.parentStcity!==this.props.parentStcity&&this.clearShowData()}},{key:"_inputOnChangeHandler",value:function(t){if(this.props.parentStcity){var e=this;this.timer&&clearTimeout(this.timer),this.props.getkeywordData(t),this.timer=setTimeout(function(){e.fetchData(t)},500)}}},{key:"fetchData",value:function(t){var e=this;if(!(t.length<2)){this.AbortController&&this.AbortController.abort(),this.AbortController=new AbortController;var n=this.AbortController.signal,a=b.j.keyword;this.props.parentStcity&&fetch("".concat(a,"?citycode=").concat(this.props.parentStcity),{method:"GET",mode:"no-cors",signal:n,headers:new Headers({"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"})}).then(function(t){return t.json()}).then(function(n){return e.processData(n,t)}).catch(function(t){})}}},{key:"filterData",value:function(t,e){var n=[];if(t.length){var a=e.toUpperCase();n=t.filter(function(t){return-1!==t.txt.indexOf(a)})}return n}},{key:"clearWord",value:function(t){this.setState({searchKeyWord:t,selectText:t})}},{key:"isFocus",value:function(t){this.setState({isFocus:!0,show:t})}},{key:"processData",value:function(t,e){var n=this,a=new Promise(function(e,n){t.Data.forEach(function(t){t.level2="飯店",t.level3=t.HotelCode,t.txt=t.HotelName}),e(t)});return a.then(function(t){var a=n.filterData(t.Data,e);n.setState({data:t.Data,showData:a,searchKeyWord:e})}),a}},{key:"getItemClickValueState",value:function(t){this.setState({selectText:t.txt,show:!1,isFocus:!1}),this.props.getkeywordtxt(t.txt)}},{key:"render",value:function(){var t=this;return w.a.createElement(Y.a,{className:"pc_keyWord m-b-sm",onClickOutside:this.closeDestnMenu},w.a.createElement(O.a,{ref:function(e){t.qq=e},label:"關鍵字",subComponent:w.a.createElement(I.a,{containerClass:"int_rcln blue request",labelClass:"d-no",inputClass:"",placeholderText:"請輸入產品名稱、飯店名稱或關鍵字",keyWord:this.state.selectText,parentStcity:this.props.parentStcity,clearWord:function(e){return t.clearWord(e)},onChange:function(e){return t._inputOnChangeHandler(e)},isFocus:function(e){return t.isFocus(e)}})}),w.a.createElement("div",{className:"act_wrap"},w.a.createElement("span",{className:this.state.isFocus?"closeBtn":"closeBtn d-no",onClick:this.closeDestnMenu}),w.a.createElement(N.a,{containerClass:this.state.isFocus?"":"d-no",isFocus:this.state.isFocus,data:this.state.showData,matchWord:this.state.searchKeyWord,getItemClickValue:function(e){return t.getItemClickValueState(e)},showText:this.state.showText,noMatchText:this.props.parentStcity?"很抱歉，找不到符合的項目":"請先選擇目的地",minimumStringQuery:this.props.parentStcity?"請至少輸入兩個字":"請先選擇目的地",minimumStringQueryLength:2,footer:!1,closeBtnOnClick:function(){return setTimeout(t.closeDestnMenu,0)},rules:[{title:"飯店",icon:w.a.createElement(E.a,{name:"hotelforeignBookingf",key:1})}]})))}}]),e}(k.Component),at=function(t){function e(t){var n;return l()(this,e),n=p()(this,m()(e).call(this,t)),_()(g()(n),"validataLocalstorageData",function(t){var e=t.PostTime+6048e5,a=t.sFcity,o=t.sTcity,r=t.sDatef,s=t.sDatet,i=t.Tools,l=t.selectText,c=t.selectedData,u=t.sHotelName;if(e<(new Date).getTime())Object(Y.i)({panel:"highSpeedRail",methods:"delete"});else{var d=r,p=s;(X()(r).isBefore(X()())||X()(s).isBefore(X()()))&&(d=X()().add(5,"days").format("YYYY-MM-DD"),p=X()().add(30,"days").format("YYYY-MM-DD")),d||(p="");var h={startInputValue:d,endInputValue:p};n.setState({sFcity:a,sTcity:o,sDatef:d,sDatet:p,Tools:i,selectedData:c,selectText:u||l},n.getAlldate(h))}}),_()(g()(n),"onClickItem",function(t){n.setState(function(e){return{selectedData:[t],sTcity:""}})}),_()(g()(n),"getTools",function(t,e){var a=n.state.Tools,o=s()(a);if(e)o.push(t+1);else{var r=a.indexOf(t+1);o.splice(r,1)}n.setState({Tools:o.sort()})}),_()(g()(n),"onRoomListChange",function(t){var e=t.roomList,a=Object(z.d)(e),r=o()(a,2),s=r[0],i=r[1];n.setState(function(t){return{roomlist:s.join(","),roomage:i.join(",")}})}),_()(g()(n),"changeNoHotel",function(t){var e=n.state,a=e.roomlist,o=e.roomage,r="2-0-0",s="-";t&&(r=a.split(",")[0],s=o.split(",")[0]),n.setState({noHotel:t,roomlist:r,roomage:s})}),n.state={data:[],searchKeyWord:"",selectText:"",isFocus:!1,show:!1,selectedData:[],sFcity:"",sTcity:"",sFreekind:"",sFreekind1:"",sDatef:X()().add(5,"days").format("YYYY-MM-DD"),sDatet:X()().add(30,"days").format("YYYY-MM-DD"),Tools:[1],days:"",dayOption:[{text:"不限",value:""},{text:"2天",value:"2"},{text:"3天",value:"3"},{text:"4天",value:"4"},{text:"5天",value:"5"},{text:"6天",value:"6"},{text:"7天",value:"7"},{text:"8天以上",value:"8"}],noHotel:!1,roomlist:"2-0-0",roomage:"-"},n}return D()(e,t),u()(e,[{key:"componentDidMount",value:function(){var t=this;Object(Y.i)({panel:"highSpeedRail",methods:"get"},function(e){t.validataLocalstorageData(e)})}},{key:"getAlldate",value:function(t){this.setState({sDatef:t.startInputValue,sDatet:t.endInputValue})}},{key:"kkk",value:function(t){this.setState({sFcity:t})}},{key:"getdatavTcity",value:function(t){this.setState({sTcity:t})}},{key:"getkeywordData",value:function(t){this.setState({searchKeyWord:t})}},{key:"getkeywordtxt",value:function(t){this.setState({selectText:t})}},{key:"closeNvbRslb",value:function(){this.props.closeNvbRslb()}},{key:"getSelectedData",value:function(t){this.setState({selectedData:t})}},{key:"handleAllSubmit",value:function(){var t=this.state,e=t.sFcity,n=t.sTcity,a=t.sDatef,o=t.sDatet,r=t.Tools,s=t.selectText,i=t.selectedData,l=t.sHotelName,c=(new Date).setHours(0,0,0,0);return Object(Y.i)({panel:"highSpeedRail",methods:"post",data:{sFcity:e,sTcity:n,sDatef:a,sDatet:o,Tools:r,selectText:s,selectedData:i,sHotelName:l,PostTime:c}}),n.length||a.length&&o.length?n.length?a.length&&o.length?void window.open("https://www.liontravel.com/webft/webftse01.aspx?sFcountry=TW&sTcountry=TW&sFreekind1=&sFcity=".concat(e,"&sTcity=").concat(n,"&sDatef=").concat(a.replace(/-/g,""),"&sDatet=").concat(o.replace(/-/g,""),"&sTools=").concat(r,"&sHotelName=").concat(s),this.props.hrefTarget):alert("請選擇出發日期"):alert("請輸入 / 選擇目的地"):alert("請輸入 / 選擇目的地、請選擇出發日期")}},{key:"render",value:function(){var t=this;return w.a.createElement("div",{className:"high_speed_rail_pc"},w.a.createElement("div",{className:"high_speed_rail-row"},w.a.createElement(M.a,{ClassName:"m-b-sm fwb-b",option:$,label:"出發地",icon:w.a.createElement(E.a,{name:"toolmap"}),req:!0,breakline:!0,onChangeCallBack:function(e){return t.kkk(e)},defaultValue:this.state.sFcity?this.state.sFcity:"_"}),w.a.createElement(et,{getdatavTcity:function(e){return t.getdatavTcity(e)},getSelectedData:function(e){t.getSelectedData(e)},selectedData:this.state.selectedData})),w.a.createElement("div",{className:"high_speed_rail-row"},w.a.createElement(A.a,{panelName:"taiwanVacation",defaultStartDate:this.state.sDatef?this.state.sDatef:X()().add(5,"days").format("YYYY-MM-DD"),defaultEndDate:this.state.sDatet?this.state.sDatet:X()().add(30,"days").format("YYYY-MM-DD"),ClassName:"m-b-sm",startTxt:"最早",endTxt:"最晚",onChange:function(e){return t.getAlldate(e)}}),w.a.createElement("div",{className:"high_speed_rail-row"},w.a.createElement(M.a,{option:this.state.dayOption,placeholder:"請選擇",label:"旅遊天數",defaultValue:this.state.days,ClassName:"strcln_day",breakline:!0,onChangeCallBack:function(e){return t.setState({days:e})}}),w.a.createElement("div",{className:"t15"},w.a.createElement(C.a,{textContent:"只找不含住宿",checked:this.state.noHotel,whenChange:this.changeNoHotel})))),w.a.createElement("div",{className:"high_speed_rail-row"},w.a.createElement(U,{noHotel:this.state.noHotel,roomlist:this.state.roomlist,roomage:this.state.roomage,onChange:this.onRoomListChange}),w.a.createElement(nt,{getkeywordData:function(e){return t.getkeywordData(e)},getkeywordtxt:function(e){return t.getkeywordtxt(e)},parentStcity:this.state.sTcity,keyWord:this.state.selectText})),w.a.createElement("div",{className:"txt-right"},w.a.createElement(T.a,{prop:"string",className:"submitBtn",lg:!0,radius:!0,whenClick:function(){return t.handleAllSubmit()}},"搜尋")))}}]),e}(k.PureComponent);n.d(e,"default",function(){return at})}}]);