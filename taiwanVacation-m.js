(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{297:function(e,t,a){"use strict";a.r(t);var n=a(340),o=a.n(n),s=a(342),r=a.n(s),l=a(336),i=a.n(l),c=a(318),u=a.n(c),d=a(319),m=a.n(d),h=a(320),p=a.n(h),f=a(321),v=a.n(f),g=a(322),y=a.n(g),D=a(323),S=a.n(D),b=a(324),N=a.n(b),C=a(325),w=a.n(C),k=a(16),T=a.n(k),x=a(331),E=a(346),_=a(341),H=a(334),A=a(332),L=a(338),M=a(356),O=a(348),Y=a(351),P=a(326),B=a(117),W=a.n(B),I=a(347),F=a(352),R=[{catalogueName:"城市",catafilter:function(e){return e}}],j=function(e){return e.forEach(function(e){e.txt="".concat(e.text)}),e},K=JSON.parse('{ "vLine": { "_9": "台灣" } }'),J=function(e){function t(e){var a;return u()(this,t),a=p()(this,v()(t).call(this,e)),N()(S()(S()(a)),"getData",function(e){var t=sessionStorage.getItem(e);if(t&&Object(P.f)(t)){var n=JSON.parse(t);a.setState({destinationDtm:w()(n,K)}),a._getDataCallBack(n)}else Object(P.c)(e,function(t){var n=JSON.stringify(t);a.setState({destinationDtm:w()(t,K)}),a._getDataCallBack(t),sessionStorage.setItem(e,n)})}),N()(S()(S()(a)),"_getDataCallBack",function(e){var t=[],n=Object.keys(e.vArea._9);n.map(function(a,o){var s=Object.keys(e.vTcity[n[o]]);s.map(function(a,r){var l=s[r],i=e.vTcity[n[o]][s[r]],c={vArea:n[o],vLineText:e.vArea._9["".concat(n[o])],vLinewebarea:"_",vLinetravel:l,vLinetravelText:i,text:"".concat(i,"-").concat(e.vArea._9["".concat(n[o])]),vTcity:"".concat(l),value:"_9-".concat(n[o],"-").concat(l)};t.push(c)})}),a.setState({destinationAct:t})}),N()(S()(S()(a)),"emitPushData",function(e){var t=a.props.selectedData,n=0<t.length?t[0].text+"-"+t[0].vLinetravelText:"",o=e?e.text+"-"+e.vLinetravelText:"",s=n===o?"":o;e?(a.props.onChange&&a.props.onChange(e),a.setState({keyword:s,showDtm:!0})):(a.setState({keyword:"",showDtm:!0}),a.props.onChange&&a.props.onChange(""))}),N()(S()(S()(a)),"handleCloseMenu",function(){var e=a.props.selectedData,t=a.state.keyword;if(!a.isMouseDown){if(0<e.length){var n=e?e[0].text:"";t.length!==n.length&&a.setState({keyword:n,showDtm:!0,showAct:!1})}a.setState({showDtm:!0,showAct:!1})}}),N()(S()(S()(a)),"handleMouseDown",function(){a.isMouseDown=!0}),N()(S()(S()(a)),"handleMouseUp",function(){a.isMouseDown=!1}),N()(S()(S()(a)),"handleEmitRemoveData",function(e,t){a.emitPushData([]),a.setState({showAct:!1,showDtm:!0})}),N()(S()(S()(a)),"handleLabelWrapClick",function(){a.searchInput.current.inputDOM.focus()}),N()(S()(S()(a)),"handleChange",function(e){e.target.value?a.setState({keyword:e.target.value,showAct:!0,showDtm:!1}):(a.setState({keyword:"",showAct:!1,showDtm:!0}),a.props.onChange&&a.props.onChange(""))}),a.searchInput=T.a.createRef(),a.state={keyword:a.props.selectedData.length?a.props.selectedData[0].text:"",showDtm:!0,destinationDtm:{},showAct:!1,destinationAct:{}},a}return y()(t,e),m()(t,[{key:"componentDidMount",value:function(){this.getData(this.props.fetchPath)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.selectedData.length?e.selectedData[0].text:"";this.setState({keyword:t})}},{key:"render",value:function(){var e=this,t=this.props,a=t.placeholder,n=t.minimumStringQueryLength,o=t.minimumStringQuery,s=t.noMatchText,r=(t.label,t.subLabel),l=(t.fetchPath,t.isRequired,t.size,t.iconName,t.selectedData),i=this.state,c=i.keyword,u=i.showAct,d=i.destinationAct,m=i.showDtm,h=i.destinationDtm,p=l.map(function(e){return e.value});return T.a.createElement("div",{className:"SingleInputMenu vacation_taiwan_m"},T.a.createElement("header",{className:"dtm_rcfr-titleWrap"},T.a.createElement("div",{className:"txt-center dtm_rcfr-title"},"目的地"),T.a.createElement("div",{className:"dtm_rcfr-row"},T.a.createElement(A.a,{className:"int_rcln int-tags-single",ref:this.searchInput,placeholder:a,value:c,onChange:function(t){return e.handleChange(t)},onClearValue:function(t){return e.handleEmitRemoveData(t,l)}}),T.a.createElement(L.a,{prop:"string",className:"m-l-sm",md:!0,radius:!0,whenClick:this.props.getSelect},"確定")),T.a.createElement("p",{className:"dtm_rcfr-label"},r)),T.a.createElement("div",{className:"dtm_rcfr-content"},Object.keys(d).length&&!l.length&&T.a.createElement(F.a,{InputIsFocus:u,url:d,minimumStringQueryLength:n,minimumStringQuery:o,searchKeyWord:c,noMatchText:s,ClassName:!u&&"d-no",footer:!1,theme:"future",closeActcallback:function(t){void 0!==t?(e.setState({showAct:!1,keyword:""}),e.emitPushData(t)):e.handleCloseMenu()},changeKey:j,catalogue:R}),T.a.createElement("div",{className:"dtm_rcfr-wrap ".concat(m?"open":null)},Object.keys(h).length&&T.a.createElement(I.a,{levelKey:["vLine","vArea","vTcity"],onClickItem:this.emitPushData,dataResouce:h,selectedData:p,transformFetchData:function(e){if("string"!=typeof e)return e;var t=(e='"vLine":{"_9":"台灣"},'+e).replace(/\r?\n|\r/g,"").replace(/(?:var|let|const)\s(\w+)\s=/g,'"$1":').replace(/;/g,",").replace(/,$/g,"").replace(/'/g,'"');return JSON.parse("{"+t+"}")}}))))}}]),t}(k.Component);N()(J,"defaultProps",{max:3,minimumStringQueryLength:2}),N()(J,"propTypes",{fetchPath:W.a.string.isRequired,selectedData:W.a.array.isRequired,max:W.a.number,placeholder:W.a.string,minimumStringQueryLength:W.a.number.isRequired,minimumStringQuery:W.a.string,noMatchText:W.a.string,label:W.a.string,onChange:W.a.func});var Q=J,V=a(486),U=a(487),q=a(399),z=function(e){function t(){var e,a;u()(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return a=p()(this,(e=v()(t)).call.apply(e,[this].concat(o))),N()(S()(S()(a)),"state",{roomList:[{adult:2,childrenWithBed:[],childrenNoBed:[]}],maxPeople:8,maxChild:3,childForSingleAdult:2,minAdult:1,inputText:"共1間，2人"}),N()(S()(S()(a)),"updatePanelRooms",function(){var e=a.props,t=e.roomlist,n=e.roomage,o=t.split(",").map(function(e){return e.split("-").filter(function(e){return e.length}).map(function(e){return Number(e)})}),s=n.split(",").map(function(e){return e.split("-").map(function(e){return e.split(";").filter(function(e){return e.length}).map(function(e){return Number(e)})})}),r=o.map(function(e,t){return{adult:o[t][0],childrenWithBed:s[t][0],childrenNoBed:s[t][1]}}),l=Object(q.c)(r);a.setState({roomList:r,inputText:l})}),N()(S()(S()(a)),"changeRoomCount",function(e){var t=a.state.roomList,n=Number(e),o={adult:1,childrenWithBed:[],childrenNoBed:[]};if(n!==t.length){for(var s=[],r=0;r<n;r++)s.push(o);var l=Object(q.c)(s);a.setState(function(e){return{inputText:l,roomList:s}})}}),N()(S()(S()(a)),"onClickAdd",function(e,t){var n=a.state,o=n.maxPeople,s=n.maxChild,r=n.childForSingleAdult,l=a.calcPeopleInfo(),c=i()(l,4),u=c[0],d=c[1],m=c[2],h=c[3];if(!(o<u+1)){if("childrenWithBed"===t||"childrenNoBed"===t){var p=m+h+1;if(1===d&&r<p)return;if(s<p)return}a.setState(function(a){var n=JSON.parse(JSON.stringify(a.roomList)),o=n[e][t];return"adult"!==t?o.push(0):n[e][t]=o+1,{roomList:n,inputText:Object(q.c)(n)}})}}),N()(S()(S()(a)),"onClickMinus",function(e,t){var n=a.state.minAdult,o=JSON.parse(JSON.stringify(a.state.roomList)),s=o[e][t];if("adult"===t){if(s===n)return;o[e][t]=s-1,o=o.map(function(e){return{adult:e.adult,childrenWithBed:[],childrenNoBed:[]}})}else{if(0===s.length)return;s.pop()}var r=Object(q.c)(o);a.setState(function(e){return{roomList:o,inputText:r}})}),N()(S()(S()(a)),"onChangeChildAge",function(e,t,n,o){var s=r()(a.state.roomList),l=Number(o);s[e][t][n]=l,a.setState(function(e){return{roomList:s}})}),a}return y()(t,e),m()(t,[{key:"componentDidMount",value:function(){this.updatePanelRooms()}},{key:"calcPeopleInfo",value:function(){for(var e=this.state.roomList,t=0,a=0,n=0,o=0,s=0;s<e.length;s++){var r=e[s].adult,l=e[s].childrenWithBed.length,i=e[s].childrenNoBed.length;a+=r,n+=l,o+=i,t=t+r+l+i}return[t,a,n,o]}},{key:"render",value:function(){var e=this,t=this.state,a=t.roomList,n=t.inputText,o=this.props.onClickConfirm;return T.a.createElement("div",{className:"nvb_content"},T.a.createElement("header",null,T.a.createElement("h3",{className:"txt-center page_title"},"間數/人數"),T.a.createElement("div",{className:"search_input"},T.a.createElement(A.a,{placeholder:"共N間，N人",readOnly:!0,value:n,color:"blue"}),T.a.createElement(L.a,{radius:!0,whenClick:function(){o(e.state)}},"確定"))),T.a.createElement("div",{className:"page_content wrapper-sm"},T.a.createElement(_.a,{option:U.b,placeholder:"請選擇",label:"間數:",defaultValue:a.length,onChangeCallBack:this.changeRoomCount,ClassName:"m-b-sm"}),a.map(function(t,a){return T.a.createElement(q.b,{key:a,roomCount:a,adult:t.adult,childrenWithBed:t.childrenWithBed,childrenNoBed:t.childrenNoBed,onClickAdd:e.onClickAdd,onClickMinus:e.onClickMinus,onChangeChildAge:e.onChangeChildAge})}),T.a.createElement(q.a,null)))}}]),t}(k.PureComponent),$=a(339),G=a.n($),X=(a(349),a(488),{display:"inline-block",marginBottom:"10px",width:"100%",verticalAlign:"top"}),Z={marginBottom:"10px"},ee=function(e){function t(e){var a;return u()(this,t),a=p()(this,v()(t).call(this,e)),N()(S()(S()(a)),"updateSelectedData",function(){a.setState({selectedData:a.props.selectedData})}),N()(S()(S()(a)),"switch",function(){var e=JSON.parse(JSON.stringify(a.state.dptSelectedData)),t=JSON.parse(JSON.stringify(a.state.dtnSelectedData));a.setState({dptSelectedData:t,dtnSelectedData:e})}),N()(S()(S()(a)),"dptHandleChange",function(e){var t=a.state.dptSelectedData,n=[];t.some(function(t){return e.value===t.value})?n=t.filter(function(t){return e.value!==t.value}):e.value&&n.push(e),a.setState({dptSelectedData:n})}),N()(S()(S()(a)),"dtnHandleChange",function(e){var t=a.state.dtnSelectedData,n=[];t.some(function(t){return e.value===t.value})?n=t.filter(function(t){return e.value!==t.value}):e.value&&n.push(e),a.setState({dtnSelectedData:n})}),N()(S()(S()(a)),"handleChange",function(e){var t=[];e.value&&t.push(e),a.setState({selectedData:t})}),N()(S()(S()(a)),"setValue",function(e){a.setState({obj:e})}),N()(S()(S()(a)),"getSelect",function(){if(0<a.state.selectedData.length){var e=a.state.selectedData[0].vTcity.replace("_",""),t=a.state.selectedData[0].text;a.props.getdatavTcity(e,t,a.state.selectedData)}else a.props.getdatavTcity("","",a.state.selectedData)}),a.state={selectedData:a.props.selectedData?a.props.selectedData:[],dptSelectedData:[],dtnSelectedData:[]},a.fetchPath=x.j.destination,a}return y()(t,e),m()(t,[{key:"componentDidUpdate",value:function(e,t){e.selectedData!==this.props.selectedData&&this.updateSelectedData()}},{key:"closeNvbRslb",value:function(){this.props.closeNvbRslb()}},{key:"render",value:function(){var e=this,t=this.state.selectedData;return T.a.createElement("div",{style:w()({},w()({},Z,X)),className:"nvbRslb_destination"},T.a.createElement("span",{className:"nvb_rslb_goBack",onClick:function(){e.closeNvbRslb()}},T.a.createElement(H.a,{name:"toolbefore"})),T.a.createElement(Q,{className:"SingleInputMenu",size:"",fetchPath:this.fetchPath,selectedData:t,placeholder:"請選擇/可輸入目的地",getSelect:this.getSelect,minimumStringQueryLength:2,minimumStringQuery:"請輸入至少兩個文字",noMatchText:"很抱歉，找不到符合的項目",subLabel:"找不到選項？請輸入關鍵字查詢",onChange:this.handleChange}))}}]),t}(k.Component),te=function(e){function t(e){var a;return u()(this,t),a=p()(this,v()(t).call(this,e)),N()(S()(S()(a)),"updateSearchKeyWord",function(){a.setState({searchKeyWord:a.props.sHotelName,selectText:a.props.sHotelName}),a._inputOnChangeHandler(a.props.sHotelName)}),N()(S()(S()(a)),"clearShowData",function(){a.setState({showData:[]})}),a.state={data:[],searchKeyWord:a.props.sHotelName?a.props.sHotelName:"",selectText:a.props.sHotelName?a.props.sHotelName:"",isFocus:!1,show:!0,selectedData:[]},a.fetchData=a.fetchData.bind(S()(S()(a))),a.AbortController=null,a}return y()(t,e),m()(t,[{key:"componentDidUpdate",value:function(e,t){e.sHotelName!==this.props.sHotelName&&this.updateSearchKeyWord(),e.parentStcity!==this.props.parentStcity&&this.clearShowData()}},{key:"_inputOnChangeHandler",value:function(e){if(this.props.parentStcity){var t=this;this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){t.fetchData(e)},500)}}},{key:"fetchData",value:function(e){var t=this;if(!(e.length<2)){this.AbortController&&this.AbortController.abort(),this.AbortController=new AbortController;var a=this.AbortController.signal,n=x.j.keyword;this.props.parentStcity&&fetch("".concat(n,"?citycode=").concat(this.props.parentStcity),{method:"GET",mode:"no-cors",signal:a,headers:new Headers({"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"})}).then(function(e){return e.json()}).then(function(a){return t.processData(a,e)}).catch(function(e){})}}},{key:"filterData",value:function(e,t){var a=[];if(e.length){var n=t.toUpperCase();a=e.filter(function(e){return-1!==e.txt.indexOf(n)})}return a}},{key:"clearWord",value:function(e){this.setState({searchKeyWord:e,selectText:e})}},{key:"isFocus",value:function(e){this.setState({isFocus:e,show:!0})}},{key:"processData",value:function(e,t){var a=this,n=new Promise(function(t,a){e.Data.forEach(function(e){e.level2="飯店",e.level3=e.HotelCode,e.txt=e.HotelName}),t(e)});return n.then(function(e){var n=a.filterData(e.Data,t);a.setState({data:e.Data,showData:n,searchKeyWord:t})}),n}},{key:"closeNvbRslb",value:function(){this.props.closeNvbRslb()}},{key:"getSelect",value:function(){this.props.getdataKeyword(this.state.selectText)}},{key:"render",value:function(){var e=this;return T.a.createElement("div",null,T.a.createElement("div",{className:"nvb_rslb_title"},T.a.createElement("span",{className:"nvb_rslb_goBack",onClick:function(){e.closeNvbRslb()}},T.a.createElement(H.a,{name:"toolbefore"})),T.a.createElement("div",{className:"txt-center"},"關鍵字")),T.a.createElement("div",{className:"m_keyWord"},T.a.createElement(V.a,{placeholderText:"請輸入飯店名稱",keyWord:this.state.selectText,clearWord:function(t){return e.clearWord(t)},onChange:function(t){return e._inputOnChangeHandler(t)},isFocus:function(t){return e.isFocus(t)}}),T.a.createElement(L.a,{prop:"string",md:!0,radius:!0,whenClick:function(){e.getSelect()}},"確定")),T.a.createElement(Y.a,{containerClass:!this.state.show&&"d-no",data:this.state.showData,matchWord:this.state.searchKeyWord,closeBtnOnClick:function(){return e.setState({show:!1})},getItemClickValue:function(t){return e.setState({selectText:t.txt})},isFocus:this.state.isFocus,showText:this.state.showText,noMatchText:this.props.parentStcity?"很抱歉，找不到符合的項目":"請先選擇目的地",minimumStringQuery:this.props.parentStcity?"請至少輸入兩個字":"請先選擇目的地",minimumStringQueryLength:2,footer:!0,rules:[{title:"飯店"}]}))}}]),t}(k.Component),ae=function(e){function t(){var e,a;u()(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return a=p()(this,(e=v()(t)).call.apply(e,[this].concat(o))),N()(S()(S()(a)),"state",{visible:a.props.visible,sTcity:"",allData:a.props.selectedData?a.props.selectedData:[]}),N()(S()(S()(a)),"updateSelectedData",function(){a.setState({allData:a.props.selectedData})}),N()(S()(S()(a)),"openPage",function(e,t,n){n.blur(),a.setState({visible:!0})}),N()(S()(S()(a)),"getdatavTcity",function(e,t,n){a.setState({sTcity:e,visible:!1,allData:n}),a.props.getdatavTcity(e,t,n)}),a}return y()(t,e),m()(t,[{key:"componentDidUpdate",value:function(e,t){e.selectedData!==this.props.selectedData&&this.updateSelectedData()}},{key:"render",value:function(){var e=this;return T.a.createElement("div",{className:"Destination m-b-sm"},T.a.createElement(A.a,{request:!0,label:"目的地",placeholder:"請輸入/選擇目的地",breakline:!0,icon:T.a.createElement(H.a,{name:"toolmap"}),value:0<this.state.allData.length?this.state.allData[0].text:"",onClick:this.openPage}),T.a.createElement(O.a,{visible:this.state.visible,ContentComponent:this.state.visible&&T.a.createElement(ee,{getdatavTcity:function(t,a,n){return e.getdatavTcity(t,a,n)},closeNvbRslb:function(t){e.setState({visible:!1})},selectedData:this.state.allData}),direction:"right",width:"100%"}))}}]),t}(k.Component),ne=function(e){function t(){var e,a;u()(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return a=p()(this,(e=v()(t)).call.apply(e,[this].concat(o))),N()(S()(S()(a)),"state",{visible:!1,sHotelName:a.props.sHotelName?a.props.sHotelName:""}),N()(S()(S()(a)),"updateSHotelName",function(){a.setState({sHotelName:a.props.sHotelName})}),N()(S()(S()(a)),"openPage",function(){a.setState({visible:!0})}),a}return y()(t,e),m()(t,[{key:"componentDidUpdate",value:function(e,t){e.sHotelName!==this.props.sHotelName&&this.updateSHotelName()}},{key:"getdataKeyword",value:function(e){this.setState({visible:!1,sHotelName:e}),this.props.getdataKeyword(e)}},{key:"render",value:function(){var e=this;return T.a.createElement("div",{className:"keywordComponent m-t"},T.a.createElement(A.a,{label:"關鍵字",placeholder:"請輸入飯店名稱",breakline:!0,value:this.state.sHotelName,onClick:this.openPage,onClearValue:function(t){e.setState({value:""})}}),T.a.createElement(O.a,{visible:this.state.visible,className:"m_keywordComponent",ContentComponent:T.a.createElement(te,{closeNvbRslb:function(t){e.setState({visible:!1})},getdataKeyword:function(t){e.getdataKeyword(t)},getSelect:function(t){e.getSelect(t)},parentStcity:this.props.parentStcity,sHotelName:this.state.sHotelName}),direction:"right",width:"100%"}))}}]),t}(k.Component),oe=function(e){return T.a.createElement("div",null,[{name:"1",value:"highRail",text:"高鐵"},{name:"2",value:"train",text:"火車"},{name:"3",value:"airCraft",text:"飛機"},{name:"4",value:"bus",text:"巴士"},{name:"5",value:"carRental",text:"租車"}].map(function(t,a){var n=-1!==e.Tools.indexOf(a+1);return T.a.createElement(E.a,{type:"checkbox",checked:n,key:t.name,name:t.name,value:t.value,className:"blue m-r-sm ",textContent:t.text,whenChange:function(t){return e.getTools(a,t)}})}))},se=function(e){function t(e){var a;return u()(this,t),a=p()(this,v()(t).call(this,e)),N()(S()(S()(a)),"validataLocalstorageData",function(e){var t=e.PostTime+6048e5,n=e.sFcity,o=e.sTcity,s=e.sDatef,r=e.sDatet,l=e.selectedStartDate,i=e.selectedEndDate,c=e.Tools,u=e.selectText,d=e.selectedData,m=e.sHotelName;if(t<(new Date).getTime())Object(P.i)({panel:"taiwanVacation",methods:"delete"});else{var h=s||l,p=r||i;(G()(s||l).isBefore(G()())||G()(r||i).isBefore(G()()))&&(h=G()().add(5,"days").format("YYYY-MM-DD"),p=G()().add(30,"days").format("YYYY-MM-DD")),h||(p=""),a.setState({sFcity:n,sTcity:o,selectedStartDate:h,selectedEndDate:p,Tools:c,selectedData:d,sHotelName:u||m})}}),N()(S()(S()(a)),"updateRoomListInput",function(e){var t=e.roomlist,a=e.roomage,n=t.split(",").map(function(e){return e.split("-").filter(function(e){return e.length}).map(function(e){return Number(e)})}),o=a.split(",").map(function(e){return e.split("-").map(function(e){return e.split(";").filter(function(e){return e.length}).map(function(e){return Number(e)})})}),s=n.map(function(e,t){return{adult:n[t][0],childrenWithBed:o[t][0],childrenNoBed:o[t][1]}});return Object(q.c)(s)}),N()(S()(S()(a)),"handleClose",function(){a.setState({activeInput:null})}),N()(S()(S()(a)),"handleConfirm",function(){var e=a.calendar.state,t=e.selectedStartDate,n=e.selectedEndDate;a.setState(function(e){return{selectedStartDate:t,selectedEndDate:n,activeInput:null}})}),N()(S()(S()(a)),"roomPageConfirm",function(e){var t=e.inputText,n=e.roomList,o=Object(q.d)(n),s=i()(o,2),r=s[0],l=s[1];a.setState(function(e){return{roomListInput:t,roomlist:r.join(","),roomage:l.join(","),activeInput:null}})}),N()(S()(S()(a)),"selectSFcity",function(e){e&&a.setState({sFcity:e})}),N()(S()(S()(a)),"getTools",function(e,t){var n=a.state.Tools,o=r()(n);if(t)o.push(e+1);else{var s=n.indexOf(e+1);o.splice(s,1)}a.setState({Tools:o.sort()})}),a.state={data:[],searchKeyWord:"",selectedStartDate:G()().add(5,"days").format("YYYY-MM-DD"),selectedEndDate:G()().add(30,"days").format("YYYY-MM-DD"),activeInput:null,sFcountry:"TW",sFcity:"",sTcountry:"TW",sTcity:"",selectedData:[],sFreekind:"",sFreekind1:"",sHotelName:"",Tools:[1,2,3,4,5],days:"",dayOption:[{text:"不限",value:""},{text:"1~5天",value:"1,2,3,4,5"},{text:"6~10天",value:"6,7,8,9,10"},{text:"10天以上",value:"10"}],noHotel:!1,roomlist:"2-0-0",roomage:"-",roomListInput:"共1間，2人"},a.option=[{text:"不限",value:"_"},{text:"台北",value:"_TPE"},{text:"板橋",value:"_PAN"},{text:"桃園",value:"_TAO"},{text:"新竹",value:"_HCU"},{text:"苗栗",value:"_MLI"},{text:"台中",value:"_TCH"},{text:"彰化",value:"_CHA"},{text:"南投",value:"_NTO"},{text:"雲林",value:"_YLI"},{text:"嘉義",value:"_CYI"},{text:"台南",value:"_TNN"},{text:"高雄",value:"_KHH"},{text:"屏東",value:"_PIN"},{text:"花蓮",value:"_HLN"},{text:"台東",value:"_TTT"}],a.calendar=null,a}return y()(t,e),m()(t,[{key:"componentDidMount",value:function(){var e=this;Object(P.i)({panel:"taiwanVacation",methods:"get"},function(t){e.validataLocalstorageData(t)})}},{key:"showNvbPage",value:function(e){this.setState(function(t){return o()({},t,{activeInput:e})})}},{key:"getdataKeyword",value:function(e){this.setState({sHotelName:e})}},{key:"getdatavTcity",value:function(e,t,a){this.setState({sTcity:e,selectedData:a})}},{key:"handleAllSubmit",value:function(){var e=this.state,t=e.sFcity,a=e.sTcity,n=e.selectedStartDate,o=e.selectedEndDate,s=e.Tools,r=e.selectedData,l=e.sHotelName;if(Object(P.i)({panel:"taiwanVacation",methods:"post",data:{sFcity:t,sTcity:a,selectedStartDate:n,selectedEndDate:o,Tools:s,selectedData:r,sHotelName:l}}),!a.length)return alert("請輸入 / 選擇目的地");window.open("https://www.liontravel.com/webft/webftse01.aspx?sFcountry=TW&sTcountry=TW&sFreekind1=&sFcity=".concat(t,"&sTcity=").concat(a,"&sDatef=").concat(n.replace(/-/g,""),"&sDatet=").concat(o.replace(/-/g,""),"&sTools=").concat(s,"&sHotelName=").concat(l),this.props.hrefTarget)}},{key:"render",value:function(){var e=this,t=this.state,a=t.selectedStartDate,n=t.selectedEndDate,o=t.activeInput,s=t.roomlist,r=t.roomage,l=t.roomListInput,i=0===o||1===o,c="roomlist"===o,u=i||"destination"===o||c;return T.a.createElement("div",{className:"vacation_taiwan_m m-t-sm"},T.a.createElement(_.a,{ClassName:"fwb-b m-b-sm",option:this.option,placeholder:"目的地",label:"出發地",icon:T.a.createElement(H.a,{name:"toolmap"}),defaultValue:this.state.sFcity?this.state.sFcity:"_",breakline:!0,req:!0,onChangeCallBack:function(t){return e.setState({sFcity:t})}}),T.a.createElement(ae,{getdatavTcity:function(t,a,n){e.getdatavTcity(t,a,n)},selectedData:this.state.selectedData,visible:"destination"===this.activeInput}),T.a.createElement("div",{className:"calendar_compose"},T.a.createElement("div",{className:"input_group"},T.a.createElement(A.a,{request:!0,readOnly:!0,placeholder:"YYYY/MM/DD",label:"出發區間",icon:T.a.createElement(H.a,{name:"tooldate"}),onClick:function(){e.showNvbPage(0)},value:G()(a).format("YYYY/MM/DD")}),T.a.createElement("span",{className:"cal_icon"},"~"),T.a.createElement(A.a,{readOnly:!0,placeholder:"YYYY/MM/DD",onClick:function(){e.showNvbPage(1)},value:G()(n).format("YYYY/MM/DD")}))),T.a.createElement("div",{className:"vacation_taiwan-row m-b-sm"},T.a.createElement(_.a,{option:this.state.dayOption,placeholder:"請選擇",label:"旅遊天數",defaultValue:this.state.days,ClassName:"strcln_day",breakline:!0,onChangeCallBack:function(t){return e.setState({days:t})}}),T.a.createElement("div",{className:"t15"},T.a.createElement(E.a,{textContent:"只找不含住宿",checked:this.state.noHotel,whenChange:function(t){return e.setState({noHotel:t})}}))),T.a.createElement(A.a,{placeholder:"共N間，N人",label:"間數/人數",breakline:!0,readOnly:!0,icon:T.a.createElement(H.a,{name:"toolmember"}),className:"m-b roomListInput",onClick:function(){e.showNvbPage("roomlist")},value:l}),T.a.createElement(oe,{Tools:this.state.Tools,getTools:this.getTools}),T.a.createElement(ne,{getdataKeyword:function(t){e.getdataKeyword(t)},parentStcity:this.state.sTcity,sHotelName:this.state.sHotelName}),T.a.createElement("div",{className:"txt-right"},T.a.createElement(L.a,{prop:"string",lg:!0,radius:!0,whenClick:function(){return e.handleAllSubmit()}},"搜尋")),T.a.createElement(O.a,{visible:u,direction:"right",className:"confirmBtn_span_d-no"},T.a.createElement("span",{className:"nvb_rslb_goBack",onClick:this.handleClose},T.a.createElement(H.a,{name:"toolbefore"})),i&&T.a.createElement(M.a,{ClassName:"mm",doubleChoose:!0,selectedStartDate:a,selectedEndDate:n,endMonth:G()().add(12,"months").format("YYYY-MM"),startDate:G()().format("YYYY-MM-DD"),activeInput:o,startLabelTitle:"最早出發日",endLabelTitle:"最晚出發日",startTxt:"最早",endTxt:"最晚",ref:function(t){e.calendar=t},onClickConfirm:this.handleConfirm,customDiffTxt:function(e){return"共"+(e+1)+"天"}}),c&&T.a.createElement(z,{roomlist:s,roomage:r,onClickConfirm:this.roomPageConfirm})))}}]),t}(k.Component);a.d(t,"default",function(){return se})}}]);